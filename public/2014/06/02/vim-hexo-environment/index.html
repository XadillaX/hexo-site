<!DOCTYPE html><html class="han-init" lang="zh-Hant"><head><meta name="author" content="死月·吃圡蕾特"><meta name="description" itemprop="description" content="本文只讲两个函数，对于 markdown 如何高亮之类的问题还请自行谷歌。
　　然后请打开你自己的 .vimrc 文件。
预备工作　　首先定义一个变量——你自己的 hexo 目录，如果要跨平台可以做个判断之类的，如下：
if has(&amp;quot;win32&amp;quot;)    let g:hexoP"><link rel="alternative" href="/atom.xml" title="艾克斯の编码者" type="application/atom+xml"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>搭建 VIM 下的 Hexo 编辑环境 · 一个伪宅级别的码畜。</title><link rel="stylesheet" type="text/css" href="/font/fantasque_sans_mono/stylesheet.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/webicons/2.0.0/webicons.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/Han/3.3.0/han.min.css"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/highlight.js/9.9.0/styles/gruvbox-dark.min.css"></head><body><header><a href="/"><img class="logo" src="/images/avatar.gif" alt="艾克斯の编码者" title="艾克斯の编码者"></a><h1><a href="/" alt="艾克斯の编码者" title="艾克斯の编码者">艾克斯の编码者</a></h1><p>一个伪宅级别的码畜。</p><nav><ul><li><a href="/" alt="首页" title="首页">首页</a></li><li><a href="/pigeonhole" alt="归档" title="归档">归档</a></li><li><a href="/links" alt="链接" title="链接">链接</a></li><li><a href="/curriculumvitae" alt="关于" title="关于">关于</a></li></ul><div class="xnews-icon"><a target="_blank" href="https://xcoder.in/atom.xml">&#xe621;</a><a target="_blank" href="https://github.com/XadillaX" style="position: relative; top: -2px">&#xe735;</a><a target="_blank" href="https://www.zhihu.com/people/xadillax">&#xe63f;</a><a target="_blank" href="https://weibo.com/xadillax" style="position: relative; top: -2px">&#xe603;</a></div></nav><div class="space"></div></header><main><article class="full"><h1>搭建 VIM 下的 Hexo 编辑环境</h1><span class="post-meta">写于<time> 2014 年 06 月 02 日 04 时 52 分</time><br>更新于<time> 2016 年 12 月 27 日 15 时 54 分</time></span><div class="article-toc"><strong>大纲</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#预备工作"><span class="toc-number">1.</span> <span class="toc-text">预备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#几个函数"><span class="toc-number">2.</span> <span class="toc-text">几个函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#进入-Hexo-目录"><span class="toc-number">2.1.</span> <span class="toc-text">进入 Hexo 目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#打开一篇-Post"><span class="toc-number">2.2.</span> <span class="toc-text">打开一篇 Post</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新建一篇-Post"><span class="toc-number">2.3.</span> <span class="toc-text">新建一篇 Post</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指令映射"><span class="toc-number">3.</span> <span class="toc-text">指令映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#打开指令"><span class="toc-number">3.1.</span> <span class="toc-text">打开指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新建指令"><span class="toc-number">3.2.</span> <span class="toc-text">新建指令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用方法"><span class="toc-number">4.</span> <span class="toc-text">使用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#遗留问题"><span class="toc-number">5.</span> <span class="toc-text">遗留问题</span></a></li></ol></div><p>　　本文只讲两个函数，对于 <code>markdown</code> 如何高亮之类的问题还请自行谷歌。</p>
<p>　　然后请打开你自己的 <code>.vimrc</code> 文件。</p>
<h2 id="预备工作"><a href="#预备工作" class="headerlink" title="预备工作"></a>预备工作</h2><p>　　首先定义一个变量——你自己的 <code>hexo</code> 目录，如果要跨平台可以做个判断之类的，如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if has(&quot;win32&quot;)</span><br><span class="line">    let g:hexoProjectPath=&quot;E:\\cygwin\\home\\XadillaX\\hexo&quot;</span><br><span class="line">else</span><br><span class="line">    let g:hexoProjectPath=&quot;~/hexo/&quot;</span><br><span class="line">endif</span><br></pre></td></tr></table></figure>
<h2 id="几个函数"><a href="#几个函数" class="headerlink" title="几个函数"></a>几个函数</h2><h3 id="进入-Hexo-目录"><a href="#进入-Hexo-目录" class="headerlink" title="进入 Hexo 目录"></a>进入 Hexo 目录</h3><p>　　这个函数大致就是让你进入你自己的 <code>Hexo</code> 路径：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fun! OpenHexoProjPath()</span><br><span class="line">    execute &quot;cd &quot; . g:hexoProjectPath</span><br><span class="line">endfun</span><br></pre></td></tr></table></figure>
<h3 id="打开一篇-Post"><a href="#打开一篇-Post" class="headerlink" title="打开一篇 Post"></a>打开一篇 Post</h3><p>　　接下去就是一个打开 <code>Post</code> 的函数了：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function! OpenHexoPost(...)</span><br><span class="line">    call OpenHexoProjPath()</span><br><span class="line"></span><br><span class="line">    let filename = &quot;source/_posts/&quot; . a:1 . &quot;.md&quot;</span><br><span class="line">    execute &quot;e &quot; . filename</span><br><span class="line">endfunction</span><br></pre></td></tr></table></figure>
<blockquote>
<p>解析：上面的代码大意就是进入 Hexo 路径，然后设定好文件名，最后执行 <code>:e filename</code> 即可打开文件了。</p>
</blockquote>
<h3 id="新建一篇-Post"><a href="#新建一篇-Post" class="headerlink" title="新建一篇 Post"></a>新建一篇 Post</h3><p>　　新建的流程跟打开相似，只不过首先要在 <code>Hexo</code> 目录下执行一遍 <code>hexo new FOO</code> 的命令而已，命令执行完毕之后再打开即可。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function! NewHexoPost(...)</span><br><span class="line">    call OpenHexoProjPath()</span><br><span class="line"></span><br><span class="line">    let filename = a:1</span><br><span class="line">    execute &quot;!hexo new &quot; . filename</span><br><span class="line"></span><br><span class="line">    call OpenHexoPost(a:1)</span><br><span class="line">endfunction</span><br></pre></td></tr></table></figure>
<h2 id="指令映射"><a href="#指令映射" class="headerlink" title="指令映射"></a>指令映射</h2><p>　　函数写好后我们最后把函数映射成类似于 <code>:e</code>, <code>:w</code> 之类的后面能跟着参数的指令即可。</p>
<p>　　以前木有接触过的同学可以参考一下<a href="http://vimdoc.sourceforge.net/htmldoc/usr_40.html#40.2" target="_blank" rel="external">这里</a>的文档。</p>
<h3 id="打开指令"><a href="#打开指令" class="headerlink" title="打开指令"></a>打开指令</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">command -nargs=+ HexoOpen :call OpenHexoPost(&quot;&lt;args&gt;&quot;)</span><br></pre></td></tr></table></figure>
<h3 id="新建指令"><a href="#新建指令" class="headerlink" title="新建指令"></a>新建指令</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">command -nargs=+ HexoNew :call NewHexoPost(&quot;&lt;args&gt;&quot;)</span><br></pre></td></tr></table></figure>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p>　　当你做完以上步骤的时候，你就可以无论在什么目录下在 VIM 里面通过下面的指令进行新建一篇日志了：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:HexoNew artical-name</span><br></pre></td></tr></table></figure>
<p>　　以及下面的指令来打开一篇已存在的日志：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:HexoOpen artical-name</span><br></pre></td></tr></table></figure>
<h2 id="遗留问题"><a href="#遗留问题" class="headerlink" title="遗留问题"></a>遗留问题</h2><p>　　相信看到这里之后，大家也能自己写出一个生成的指令了，这里就不累述了，无非就是：</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">:!hexo generate</span><br></pre></td></tr></table></figure>
<hr><section class="comment"><div class="ds-thread" data-thread-key="/2014/06/02/vim-hexo-environment/" data-title="搭建 VIM 下的 Hexo 编辑环境" data-url="https://xcoder.in/2014/06/02/vim-hexo-environment/"></div></section><script>var _shortName = "xcoder-ghost";</script><script>var duoshuoQuery = {};
duoshuoQuery["short_name"] = _shortName;
(function() {
    var ds = document.createElement("script");
    ds.type = "text/javascript";
    ds.async = true;
    ds.src = (document.location.protocol === "https:" ? "https:" : "http:") + "//static.duoshuo.com/embed.js";
    ds.charset = "utf-8";
    (document.getElementsByTagName("head")[0] ||
        document.getElementsByTagName("body")[0]).appendChild(ds);
})();</script><footer><section class="copyright">&copy; 2016 - 2016<a href="/">死月·吃圡蕾特</a></section><section class="intro">由<a href="https://hexo.io/">Hexo</a>驱动&middot;挂载<a href="https://github.com/xadillax/hexo-xnew">X'new</a>主题</section></footer></article></main><script src="//cdn.bootcss.com/Han/3.3.0/han.min.js"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><script src="//cdn.bootcss.com/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script><script src="/scripts/highlight.pack.js"></script><script>$(function() {
    $("header").backstretch("/images/header.jpeg");

    $("figure.highlight").each(function(i, block) {
        $(block).removeClass("highlight");
        $("<pre><code class='__tobehl " + ($(block).attr("class") === "plain" ? "" : ("lang-" + $(block).attr("class"))) + "'></code></pre>").insertAfter($(block));
        $(block).next().find("code").text((block.innerText || block.textContent));
        $(block).remove();
    });
    $(".__tobehl").each(function(i, block) {
        hljs.highlightBlock(block);
    });

    $("article.full img").each(function() {
        $(this).parent().css("text-align", "center");
    });

    if($(".article-toc").children().length < 2) {
        $(".article-toc").css("display", "none");
    }
});</script></body></html>