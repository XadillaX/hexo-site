<!DOCTYPE html><html class="han-init" lang="zh-Hant"><head><meta name="author" content="死月·吃圡蕾特"><meta name="description" itemprop="description" content="序最近闲着蛋疼实现了两个库。

随机生成中文名字
随机生成中文技能名

我当然不会说去用各种人工智能去实现一个强大的的解析器然后生成，也不会说用一个非常庞大如搜狗拼音的姓名库来随机获取——我只是偶然间知道蘑菇街小侠节一个混战 PK 的 Demo 编写比赛，闲来无聊随便写写，然而这其中我需要随机给 B"><link rel="alternative" href="/atom.xml" title="艾克斯の编码者" type="application/atom+xml"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>我是如何实现简单的随机中文名生成器的（Node 版） · 一个伪宅级别的码畜。</title><link rel="stylesheet" type="text/css" href="/font/fantasque_sans_mono/stylesheet.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/webicons/2.0.0/webicons.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/Han/3.3.0/han.min.css"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/highlight.js/9.9.0/styles/gruvbox-dark.min.css"></head><body><header><a href="/"><img class="logo" src="/images/avatar.gif" alt="艾克斯の编码者" title="艾克斯の编码者"></a><h1><a href="/" alt="艾克斯の编码者" title="艾克斯の编码者">艾克斯の编码者</a></h1><p>一个伪宅级别的码畜。</p><nav><ul><li><a href="/" alt="首页" title="首页">首页</a></li><li><a href="/pigeonhole" alt="归档" title="归档">归档</a></li><li><a href="/links" alt="链接" title="链接">链接</a></li><li><a href="/curriculumvitae" alt="关于" title="关于">关于</a></li></ul><div class="xnews-icon"><a target="_blank" href="https://xcoder.in/atom.xml">&#xe621;</a><a target="_blank" href="https://github.com/XadillaX" style="position: relative; top: -2px;">&#xe735;</a><a target="_blank" href="https://www.zhihu.com/people/xadillax">&#xe63f;</a><a target="_blank" href="https://weibo.com/xadillax" style="position: relative; top: -2px;">&#xe603;</a></div></nav><div class="space"></div></header><main><article class="full"><h1>我是如何实现简单的随机中文名生成器的（Node 版）</h1><span class="post-meta">写于<time> 2014 年 09 月 01 日 20 时 36 分</time><br>更新于<time> 2017 年 12 月 11 日 15 时 59 分</time></span><div class="article-toc"><strong>大纲</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#序"><span class="toc-number">1.</span> <span class="toc-text">序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结果示范"><span class="toc-number">2.</span> <span class="toc-text">结果示范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Chinese-Random-Name"><span class="toc-number">2.1.</span> <span class="toc-text">Chinese Random Name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chinese-Random-SKill"><span class="toc-number">2.2.</span> <span class="toc-text">Chinese Random SKill</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#解析"><span class="toc-number">3.</span> <span class="toc-text">解析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#起姓"><span class="toc-number">3.1.</span> <span class="toc-text">起姓</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#技能后缀"><span class="toc-number">3.2.</span> <span class="toc-text">技能后缀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#共用部分"><span class="toc-number">3.3.</span> <span class="toc-text">共用部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#综合说明"><span class="toc-number">3.4.</span> <span class="toc-text">综合说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#无节操小广告"><span class="toc-number">4.</span> <span class="toc-text">无节操小广告</span></a></li></ol></div><h2 id="序"><a href="#序" class="headerlink" title="序"></a>序</h2><p>最近闲着蛋疼实现了两个库。</p>
<ul>
<li>随机生成中文名字</li>
<li>随机生成中文技能名</li>
</ul>
<p>我当然不会说去用各种人工智能去实现一个强大的的解析器然后生成，也不会说用一个非常庞大如搜狗拼音的姓名库来随机获取——我只是偶然间知道蘑菇街小侠节一个混战 PK 的 Demo 编写比赛，闲来无聊随便写写，然而这其中我需要随机给 Bot 起名以及技能起名而用到的库。</p>
<p>不需要有多少正确性——这两个库的结果经常出现非常奇葩的名字，让人哭笑不得，但是我要的就是这种效果。</p>
<h2 id="结果示范"><a href="#结果示范" class="headerlink" title="结果示范"></a>结果示范</h2><p>就两个库，我各生成一批名字以示效果。</p>
<h3 id="Chinese-Random-Name"><a href="#Chinese-Random-Name" class="headerlink" title="Chinese Random Name"></a>Chinese Random Name</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">阙造</span><br><span class="line">广锡一</span><br><span class="line">席寺</span><br><span class="line">扶驾</span><br><span class="line">郑萱黄</span><br><span class="line">林樊牵</span><br><span class="line">孟登元</span><br><span class="line">鱼彰</span><br><span class="line">皮忧暑</span><br><span class="line">左稗</span><br><span class="line">宦醇</span><br><span class="line">糜弋招</span><br><span class="line">席准</span><br><span class="line">方抑</span><br><span class="line">乌泔</span><br><span class="line">苗鲁</span><br><span class="line">孟候依</span><br><span class="line">龙珠饯</span><br><span class="line">洪打鹰</span><br><span class="line">缪负铎</span><br></pre></td></tr></table></figure>
<h3 id="Chinese-Random-SKill"><a href="#Chinese-Random-SKill" class="headerlink" title="Chinese Random SKill"></a>Chinese Random SKill</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">地永心法</span><br><span class="line">缨枪诀</span><br><span class="line">冉腿</span><br><span class="line">尼逻心法</span><br><span class="line">奠拳谱</span><br><span class="line">曲掌法</span><br><span class="line">始刺</span><br><span class="line">娘桶撷刀</span><br><span class="line">璋瑾单养刀</span><br><span class="line">銎刀</span><br><span class="line">励俭驿媛心诀</span><br><span class="line">瞻驰刀诀</span><br><span class="line">晏协骅腿</span><br><span class="line">示嫩帐羽刀诀</span><br><span class="line">赛勘神体刀诀</span><br><span class="line">铸爱指</span><br><span class="line">施净琮萍棍</span><br><span class="line">泊临惇枪诀</span><br><span class="line">我道六分枪</span><br><span class="line">残亭求拳谱</span><br></pre></td></tr></table></figure>
<h2 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h2><p>实际上无论是起名还是技能名，都用了一个相同的起名字库和一段差不多的复用代码（虽然没有真正意义上的复用，只是复制粘贴而已，谁让他们是两个库呢，已经很简单了，我总不能再给他们搞一个依赖出来吧？）</p>
<h3 id="起姓"><a href="#起姓" class="headerlink" title="起姓"></a>起姓</h3><p>关于 <code>chinese-random-name</code> 中的姓氏，我找了一个中国百家姓（包括复姓）比较全的词库。</p>
<blockquote>
<p><a href="https://github.com/XadillaX/chinese-random-name/blob/master/dict/f.dict" target="_blank" rel="external">词库链接</a></p>
</blockquote>
<p>比较幸运，我找到的时候已经是这么分段分好了。我也没有详细做研究，随便给了不同的段不同的权值，当然越前面的段权值越高，被随机到的可能性越大。</p>
<p>首先用 <code>split</code> 来分割不同段：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">dict = dict.split(<span class="string">"\n\n"</span>);</span><br></pre></td></tr></table></figure>
<p>对于每一段来说通过 <code>Array.reduce</code> (详见 <a href="https://github.com/andrewplummer/Sugar/blob/master/lib/es5.js#L287" target="_blank" rel="external">SugarJs</a>) 来分割成行再成字。</p>
<p>看字典一共有 6 大段，每段的权值分别为：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> weights = [ <span class="number">100</span>, <span class="number">70</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span> ];</span><br></pre></td></tr></table></figure>
<p>然后每个字都有一个其权值区间，是累加上去的。</p>
<p>最后获取姓的时候随机生成一个在总区间内的数字，然后看看数字在哪个姓的区间内，就返回这个姓。</p>
<h3 id="技能后缀"><a href="#技能后缀" class="headerlink" title="技能后缀"></a>技能后缀</h3><p>关于 <code>chinese-random-skill</code> 中的技能后缀，我偷懒了。因为那个时候 Demo 就快 Deadline 了，所以随便糊弄了一下——直接把印象里面比较熟的后缀写上去了事，也不给权值了。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> suffix = [</span><br><span class="line">    <span class="string">"剑"</span>, <span class="string">"剑法"</span>, <span class="string">"剑谱"</span>, <span class="string">"剑诀"</span>,</span><br><span class="line">    <span class="string">"枪"</span>, <span class="string">"枪法"</span>, <span class="string">"枪诀"</span>,</span><br><span class="line">    <span class="string">"拳"</span>, <span class="string">"拳法"</span>, <span class="string">"拳谱"</span>,</span><br><span class="line">    <span class="string">"刀"</span>, <span class="string">"刀法"</span>, <span class="string">"刀谱"</span>, <span class="string">"刀诀"</span>,</span><br><span class="line">    <span class="string">"斩"</span>, <span class="string">"刺"</span>, <span class="string">"大法"</span>, <span class="string">"心诀"</span>, <span class="string">"心法"</span>, <span class="string">"诀"</span>, <span class="string">"宝典"</span>,</span><br><span class="line">    <span class="string">"棍"</span>, <span class="string">"棍法"</span>, <span class="string">"棍谱"</span>, <span class="string">"棍诀"</span>,</span><br><span class="line">    <span class="string">"指"</span>, <span class="string">"掌"</span>, <span class="string">"掌法"</span>, <span class="string">"腿"</span>, <span class="string">"攻"</span>, <span class="string">"钩"</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<h3 id="共用部分"><a href="#共用部分" class="headerlink" title="共用部分"></a>共用部分</h3><p>名字主体为两个包的共用部分。</p>
<p>实际上他们依赖于一个特定款式的字库——我也就网上随便那么一搜。</p>
<blockquote>
<p><a href="https://github.com/XadillaX/chinese-random-name/blob/master/dict/n.dict" target="_blank" rel="external">字库链接</a></p>
</blockquote>
<p>它每一行的结构一样：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Number UniChar UniChar：String</span><br></pre></td></tr></table></figure>
<p>其中第一个数字我目测是繁体的笔画数，比如 899 行的 <code>书</code> 繁体就是 <code>书</code>，数一下的确是 10 划。</p>
<p>第二个就是字本体，第三个是该字的五行属性，最后是这个字在什么什么命数（请不要迷信）描述。</p>
<p>为了让名字看起来稍微正常点（只是稍微而已），我尽可能让同属性的字在一块儿，于是有了以下组合：</p>
<ul>
<li>金金</li>
<li>木木</li>
<li>水水</li>
<li>火火</li>
<li>土土</li>
</ul>
<p><a href="https://github.com/XadillaX/chinese-random-name/blob/master/lib/name.js#L41" target="_blank" rel="external">这些字</a>凑在一起的权值为 100。</p>
<p>然后隔一个属性的话是相克的，我不懂什么起名大法什么的，只是用膝盖想了下相克的属性不好起名吧（猜错了不要怨我），于是给了 20 的权值。</p>
<p>至于隔壁属性，是相生吧？于是给了 50 权值。</p>
<p>对于三个字的起名来说，也是用了类似的方法给权值，具体可以参考代码。</p>
<p>总之就是根据其两两之间的五行关系来起名的，听起来还是有那么点道理的。</p>
<p>哈哈，权当玩的，认真你就输了。</p>
<h3 id="综合说明"><a href="#综合说明" class="headerlink" title="综合说明"></a>综合说明</h3><p>上面的分步做完了，然后真·生成名字的步骤是：</p>
<p>随机生成一个姓（或者技能后缀），然后按照某个权值随机生成一个数字代表剩下的名字的长度，然后随机生成一串该长度的名字即可。</p>
<p>最后拼接上去就 OK 了。</p>
<h2 id="无节操小广告"><a href="#无节操小广告" class="headerlink" title="无节操小广告"></a>无节操小广告</h2><p>最后还是贴一下两个包的 repo 地址吧：</p>
<blockquote>
<ul>
<li><a href="https://github.com/XadillaX/chinese-random-name" target="_blank" rel="external">Chinese Random Name</a></li>
<li><a href="https://github.com/XadillaX/chinese-random-skill" target="_blank" rel="external">Chinese Random Skill</a></li>
</ul>
</blockquote>
<p>以及安装的话照下去弄就好了</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">$ npm install chinese-random-name</span><br><span class="line">$ npm install chinese-random-skill</span><br></pre></td></tr></table></figure>
<p><code>README</code> 文件两个包都有。</p>
<hr><footer><section class="copyright">&copy; 2016 - 2017<a href="/">死月·吃圡蕾特</a></section><section class="intro">由<a href="https://hexo.io/">Hexo</a>驱动&middot;挂载<a href="https://github.com/xadillax/hexo-xnew">X'new</a>主题</section></footer></article></main><script src="//cdn.bootcss.com/Han/3.3.0/han.min.js"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><script src="//cdn.bootcss.com/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script><script src="/scripts/highlight.pack.js"></script><script>$(function() {
    $("header").backstretch("/images/header.jpeg");

    $("figure.highlight").each(function(i, block) {
        $(block).removeClass("highlight");
        $("<pre><code class='__tobehl " + ($(block).attr("class") === "plain" ? "" : ("lang-" + $(block).attr("class"))) + "'></code></pre>").insertAfter($(block));
        $(block).next().find("code").text((block.innerText || block.textContent));
        $(block).remove();
    });
    $(".__tobehl").each(function(i, block) {
        hljs.highlightBlock(block);
    });

    $("article.full img").each(function() {
        $(this).parent().css("text-align", "center");
    });

    if($(".article-toc").children().length < 2) {
        $(".article-toc").css("display", "none");
    }
});</script></body></html>