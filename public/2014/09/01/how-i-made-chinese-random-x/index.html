

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    
    <meta name="author" content="小鳥遊死月">
    
    <meta name="description" content="序
最近闲着蛋疼实现了两个库。

随机生成中文名字
随机生成中文技能名

我当然不会说去用各种人工智能去实现一个强大的的解析器然后生成，也不会说用一个非常庞大如搜狗拼音的姓名库来随机获取——我只是偶然间知道蘑菇街小侠节一个混战 PK 的 Demo 编写比赛，闲来无聊随便写写，然而这其中我需要随机给 ">
    
    

    
    
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>我是如何实现简单的随机中文名生成器的（Node 版） | 艾克斯の編碼者 · 一個偽宅级别的蒟蒻碼畜。</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">

    <!-- Javascript -->
    <script src="/js/jquery-2.1.0.min.js"></script>
    <script src="/js/jquery.backstretch.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/headroom.min.js"></script>
    <script src="/js/jquery.headroom.min.js"></script> 
    <script src="/js/common.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://xcoder.in/" title="艾克斯の編碼者">艾克斯の編碼者</a>
            </div>

            <div role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
                <p class="navbar-text pull-right">一個偽宅级别的蒟蒻碼畜。</p>

                <ul class="nav navbar-nav">
                    
                    <li id="nav-index"><a href="/">首页</a></li>
                    
                    <li id="nav-archives"><a href="/archives">归档</a></li>
                    
                    <li id="nav-tags"><a href="/tags">标签</a></li>
                    
                    <li id="nav-categories"><a href="/categories">分类</a></li>
                    
                    <li id="nav-curriculumvitae"><a href="/curriculumvitae">关于</a></li>
                    
                    <li id="nav-links"><a href="/links">链接</a></li>
                    
                    
                    <li><a href="https://github.com/XadillaX" target="_blank">GitHub</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <script>
    var backRoot = "/images/background/";
    var backArray = [ "1.jpeg", "2.jpeg", "3.jpeg", "4.jpeg", "5.jpeg", "6.jpeg", "img/iPad_Photo_20140328181354FGPM.JPG", "img/iPad_Photo_20140328181218SLUY.JPG", "img/iPad_Photo_20140328181239ME9E.JPG", "img/iPad_Photo_20140328175718BF7T.JPG", "likeit/465_16170978_35afb62980c6d1a.jpg", "likeit/wallpaper-86487.jpg", "likeit/wallpaper-651939.jpg", "likeit/wallpaper-648634.jpg", "likeit/wallpaper-657798.jpg", "likeit/wallpaper-1479749.jpg", "likeit/wallpaper-1961179.jpg", "likeit/wallpaper-1947874.jpg", "likeit/wallpaper-2055407.jpg", "likeit/wallpaper-2060090.png", "likeit/wallpaper-2142870.jpg", "likeit/wallpaper-2078006.jpg", "likeit/wallpaper-2127699.jpg", "likeit/wallpaper-2211066.jpg", "likeit/wallpaper-2588686.jpg", "likeit/wallpaper-2639031.jpg", "likeit/wallpaper-2430341.jpg", "likeit/wallpaper-2294985.jpg", "likeit/wallpaper-2705897.jpg", "likeit/wallpaper-2063319.jpg", "likeit/wallpaper-2060101.jpg", "likeit/wallpaper-1970791.jpg", "img/iPad_Photo_20140328174508AZ11.JPG", "img/new/iPad_Photo_201403281903078UKK.JPG", "img/iPad_Photo_20140328175639RA5N.JPG", "img/iPad_Photo_20140328175820DYAC.JPG", "img/iPad_Photo_201403281806230195.JPG", "img/new/iPad_Photo_201403281919292STQ.JPG", "img/new/iPad_Photo_20140328190703781D.JPG", "flandre/p541758_2girls barefoot bat_wings bed blonde_hair blue_hair feet fetal_position flandre_scarlet flat_chest hat nude red_eyes ~.jpg", "flandre/p575023_blonde_hair flandre_scarlet hat horumon multiple_persona ponytail red_eyes side_ponytail touhou wings.jpg", "flandre/p569665_2girls barefoot blonde_hair blue_hair flandre_scarlet hat highres kinoko red_eyes remilia_scarlet siblings sisters to~.jpg", "flandre/p566082_blonde_hair flandre_scarlet hat mitsuki_(artist) ponytail red_eyes short_hair side_ponytail touhou wings.jpg", "flandre/p548132_2girls bat_wings blonde_hair blue_eyes blue_hair flandre_scarlet hat kaedena_akino mask moon red_eyes red_moon remili~.jpg", "flandre/p552906_flandre_scarlet gusutafu hong_meiling izayoi_sakuya koakuma patchouli_knowledge remilia_scarlet swimsuit touhou.jpg", "flandre/p551605_flandre_scarlet kona-ta touhou.jpg", "flandre/p551983_asuka_roze danmaku flandre_scarlet remilia_scarlet touhou.jpg", "likeit/465_16170978_2b89f5997bcff44.jpg", "likeit/wallpaper-616321.jpg", "likeit/wallpaper-343717.jpg", "likeit/wallpaper-1595016.jpg", "likeit/wallpaper-1952396.jpg", "likeit/wallpaper-2060096.jpg", "likeit/wallpaper-2315398.jpg", "likeit/wallpaper-2674370.jpg", "likeit/wallpaper-2838683.jpg", "likeit/wallpaper-2564028.png", "likeit/wallpaper-1382762.jpg", "likeit/wallpaper-1128042.jpg", "likeit/wallpaper-1396368.jpg", "likeit/wallpaper-1403569.png", "likeit/wallpaper-1593633.jpg", "likeit/wallpaper-1395408.jpg", "flandre/p539131_blonde_hair flandre_scarlet hat plastic_eraser red_eyes scenery short_hair solo touhou.jpg", "flandre/p555228_flandre_scarlet hong_meiling izayoi_sakuya patchouli_knowledge remilia_scarlet shomon swimsuit touhou.jpg", "flandre/p556145_book flandre_scarlet flower hairband hakurei_reimu hat hitoto hong_meiling izayoi_sakuya kirisame_marisa koakuma patc~.jpg", "flandre/p561220_arikichi_gen blonde_hair blue_eyes blue_hair braid flandre_scarlet izayoi_sakuya ponytail red_eyes remilia_scarlet sh~.jpg", "flandre/p541363_blonde_hair flandre_scarlet hat laevatein magic_circle poncho_(pixiv) red_eyes side_ponytail touhou wings.jpg",  ];
    //console.log(backArray);
        
    $(function() {
        // page-id...
        var pageId = "2014/09/01/how-i-made-chinese-random-x/";
        pageId = pageId.substr(0, pageId.indexOf("/"));
        if(pageId === "") pageId = "index";
        
        $("#nav-" + pageId).addClass("active");
    });
    </script>
    <article class="post container">
    <div class="well post-body first-post last-post">
        <h1>我是如何实现简单的随机中文名生成器的（Node 版）</h1>
        
        <div class="time-info">
发表于:<time datetime="2014-09-01T12:36:33.000Z" itemprop="datePublished">2014年09月01日</time>,
更新于:<time datetime="2014-09-01T13:26:07.000Z" itemprop="dateModified">2014年09月01日</time>,
By <a href="http://xcoder.in/" title="小鳥遊死月">小鳥遊死月</a>
        </div>
        
        <div class="post-body-inner">
            <div id="toc" class="toc-article well">
                <strong class="toc-title">大纲</strong>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#序"><span class="toc-number">1.</span> <span class="toc-text">序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结果示范"><span class="toc-number">2.</span> <span class="toc-text">结果示范</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Chinese_Random_Name"><span class="toc-number">2.1.</span> <span class="toc-text">Chinese Random Name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Chinese_Random_SKill"><span class="toc-number">2.2.</span> <span class="toc-text">Chinese Random SKill</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#解析"><span class="toc-number">3.</span> <span class="toc-text">解析</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#起姓"><span class="toc-number">3.1.</span> <span class="toc-text">起姓</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#技能后缀"><span class="toc-number">3.2.</span> <span class="toc-text">技能后缀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#共用部分"><span class="toc-number">3.3.</span> <span class="toc-text">共用部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#综合说明"><span class="toc-number">3.4.</span> <span class="toc-text">综合说明</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#无节操小广告"><span class="toc-number">4.</span> <span class="toc-text">无节操小广告</span></a></li></ol>
            </div>
            
            <h2 id="序">序</h2>
<p>最近闲着蛋疼实现了两个库。</p>
<ul>
<li>随机生成中文名字</li>
<li>随机生成中文技能名</li>
</ul>
<p>我当然不会说去用各种人工智能去实现一个强大的的解析器然后生成，也不会说用一个非常庞大如搜狗拼音的姓名库来随机获取——我只是偶然间知道蘑菇街小侠节一个混战 PK 的 Demo 编写比赛，闲来无聊随便写写，然而这其中我需要随机给 Bot 起名以及技能起名而用到的库。</p>
<p>不需要有多少正确性——这两个库的结果经常出现非常奇葩的名字，让人哭笑不得，但是我要的就是这种效果。</p>
<h2 id="结果示范">结果示范</h2>
<p>就两个库，我各生成一批名字以示效果。</p>
<h3 id="Chinese_Random_Name">Chinese Random Name</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code"><pre>阙造
广锡一
席寺
扶驾
郑萱黄
林樊牵
孟登元
鱼彰
皮忧暑
左稗
宦醇
糜弋招
席准
方抑
乌泔
苗鲁
孟候依
龙珠饯
洪打鹰
缪负铎
</pre></td></tr></table></figure>

<h3 id="Chinese_Random_SKill">Chinese Random SKill</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code"><pre>地永心法
缨枪诀
冉腿
尼逻心法
奠拳谱
曲掌法
始刺
娘桶撷刀
璋瑾单养刀
銎刀
励俭驿媛心诀
瞻驰刀诀
晏协骅腿
示嫩帐羽刀诀
赛勘神体刀诀
铸爱指
施净琮萍棍
泊临惇枪诀
我道六分枪
残亭求拳谱
</pre></td></tr></table></figure>

<h2 id="解析">解析</h2>
<p>实际上无论是起名还是技能名，都用了一个相同的起名字库和一段差不多的复用代码（虽然没有真正意义上的复用，只是复制粘贴而已，谁让他们是两个库呢，已经很简单了，我总不能再给他们搞一个依赖出来吧？）</p>
<h3 id="起姓">起姓</h3>
<p>关于 <code>chinese-random-name</code> 中的姓氏，我找了一个中国百家姓（包括复姓）比较全的词库。</p>
<blockquote>
<p><a href="https://github.com/XadillaX/chinese-random-name/blob/master/dict/f.dict" target="_blank">词库链接</a></p>
</blockquote>
<p>比较幸运，我找到的时候已经是这么分段分好了。我也没有详细做研究，随便给了不同的段不同的权值，当然越前面的段权值越高，被随机到的可能性越大。</p>
<p>首先用 <code>split</code> 来分割不同段：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>dict = dict.split(<span class="string">"\n\n"</span>);
</pre></td></tr></table></figure>

<p>对于每一段来说通过 <code>Array.reduce</code> (详见 <a href="https://github.com/andrewplummer/Sugar/blob/master/lib/es5.js#L287" target="_blank">SugarJs</a>) 来分割成行再成字。</p>
<p>看字典一共有 6 大段，每段的权值分别为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="keyword">const</span> weights = [ <span class="number">100</span>, <span class="number">70</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">1</span>, <span class="number">1</span> ];
</pre></td></tr></table></figure>

<p>然后每个字都有一个其权值区间，是累加上去的。</p>
<p>最后获取姓的时候随机生成一个在总区间内的数字，然后看看数字在哪个姓的区间内，就返回这个姓。</p>
<h3 id="技能后缀">技能后缀</h3>
<p>关于 <code>chinese-random-skill</code> 中的技能后缀，我偷懒了。因为那个时候 Demo 就快 Deadline 了，所以随便糊弄了一下——直接把印象里面比较熟的后缀写上去了事，也不给权值了。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code"><pre><span class="keyword">var</span> suffix = [
    <span class="string">"剑"</span>, <span class="string">"剑法"</span>, <span class="string">"剑谱"</span>, <span class="string">"剑诀"</span>,
    <span class="string">"枪"</span>, <span class="string">"枪法"</span>, <span class="string">"枪诀"</span>,
    <span class="string">"拳"</span>, <span class="string">"拳法"</span>, <span class="string">"拳谱"</span>,
    <span class="string">"刀"</span>, <span class="string">"刀法"</span>, <span class="string">"刀谱"</span>, <span class="string">"刀诀"</span>,
    <span class="string">"斩"</span>, <span class="string">"刺"</span>, <span class="string">"大法"</span>, <span class="string">"心诀"</span>, <span class="string">"心法"</span>, <span class="string">"诀"</span>, <span class="string">"宝典"</span>,
    <span class="string">"棍"</span>, <span class="string">"棍法"</span>, <span class="string">"棍谱"</span>, <span class="string">"棍诀"</span>,
    <span class="string">"指"</span>, <span class="string">"掌"</span>, <span class="string">"掌法"</span>, <span class="string">"腿"</span>, <span class="string">"攻"</span>, <span class="string">"钩"</span>
];
</pre></td></tr></table></figure>

<h3 id="共用部分">共用部分</h3>
<p>名字主体为两个包的共用部分。</p>
<p>实际上他们依赖于一个特定款式的字库——我也就网上随便那么一搜。</p>
<blockquote>
<p><a href="https://github.com/XadillaX/chinese-random-name/blob/master/dict/n.dict" target="_blank">字库链接</a></p>
</blockquote>
<p>它每一行的结构一样：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="built_in">Number</span> UniChar UniChar：<span class="built_in">String</span>
</pre></td></tr></table></figure>

<p>其中第一个数字我目测是繁体的笔画数，比如 899 行的 <code>书</code> 繁体就是 <code>書</code>，数一下的确是 10 划。</p>
<p>第二个就是字本体，第三个是该字的五行属性，最后是这个字在什么什么命数（请不要迷信）描述。</p>
<p>为了让名字看起来稍微正常点（只是稍微而已），我尽可能让同属性的字在一块儿，于是有了以下组合：</p>
<ul>
<li>金金</li>
<li>木木</li>
<li>水水</li>
<li>火火</li>
<li>土土</li>
</ul>
<p><a href="https://github.com/XadillaX/chinese-random-name/blob/master/lib/name.js#L41" target="_blank">这些字</a>凑在一起的权值为 100。</p>
<p>然后隔一个属性的话是相克的，我不懂什么起名大法什么的，只是用膝盖想了下相克的属性不好起名吧（猜错了不要怨我），于是给了 20 的权值。</p>
<p>至于隔壁属性，是相生吧？于是给了 50 权值。</p>
<p>对于三个字的起名来说，也是用了类似的方法给权值，具体可以参考代码。</p>
<p>总之就是根据其两两之间的五行关系来起名的，听起来还是有那么点道理的。</p>
<p>哈哈，权当玩的，认真你就输了。</p>
<h3 id="综合说明">综合说明</h3>
<p>上面的分步做完了，然后真·生成名字的步骤是：</p>
<p>随机生成一个姓（或者技能后缀），然后按照某个权值随机生成一个数字代表剩下的名字的长度，然后随机生成一串该长度的名字即可。</p>
<p>最后拼接上去就 OK 了。</p>
<h2 id="无节操小广告">无节操小广告</h2>
<p>最后还是贴一下两个包的 repo 地址吧：</p>
<blockquote>
<ul>
<li><a href="https://github.com/XadillaX/chinese-random-name" target="_blank">Chinese Random Name</a></li>
<li><a href="https://github.com/XadillaX/chinese-random-skill" target="_blank">Chinese Random Skill</a></li>
</ul>
</blockquote>
<p>以及安装的话照下去弄就好了</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>$ npm install chinese<span class="attribute">-random</span><span class="attribute">-name</span>
$ npm install chinese<span class="attribute">-random</span><span class="attribute">-skill</span>
</pre></td></tr></table></figure>

<p><code>README</code> 文件两个包都有。</p>

            
            <section class="comment">
	<div class="ds-thread"></div>
</section>

<script type="text/javascript">
  var duoshuoQuery = {short_name:"xcoder-ghost"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 
        </div>
    </div>
</article>

    <footer id="footer">
    <div id="bottom-tip">
        艾克斯の編碼者 —— <small>一個偽宅级别的蒟蒻碼畜。</small>
    </div>
        <small>该博客由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动，搭载 <a href="https://github.com/XadillaX/hexadillax" target="_blank">Hexadillax</a> 主题</small><br />
        <small>&copy; 2014 XadillaX</small>
    </footer>
</body>
</html>
