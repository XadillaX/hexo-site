<!DOCTYPE html><html class="han-init" lang="zh-Hant"><head><meta name="author" content="死月·吃圡蕾特"><meta name="description" itemprop="description" content="这次玩脱了。好不容易四题都做出来，却因为小细节挂了两题。
DescriptionTwo Problems　　题意就是说，CF有两题，每题初始分A和B，然后每题在每分钟会扣DA和DB分。给你比赛总时间T，问你某个人可不可能拿到X分。（注意可能做出一题、两题或者一题也没做出）
　　(0 ≤ x ≤ 60"><link rel="alternative" href="/atom.xml" title="艾克斯の编码者" type="application/atom+xml"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>CodeForces Round 128 DIV2 · 一个伪宅级别的码畜。</title><link rel="stylesheet" type="text/css" href="/font/fantasque_sans_mono/stylesheet.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/webicons/2.0.0/webicons.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/Han/3.3.0/han.min.css"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/highlight.js/9.9.0/styles/gruvbox-dark.min.css"><meta name="generator" content="Hexo 5.4.0"></head><body><header><a href="/"><img class="logo" src="/images/avatar.gif" alt="艾克斯の编码者" title="艾克斯の编码者"></a><h1><a href="/" alt="艾克斯の编码者" title="艾克斯の编码者">艾克斯の编码者</a></h1><p>一个伪宅级别的码畜。</p><nav><ul><li><a href="/" alt="首页" title="首页">首页</a></li><li><a href="/pigeonhole" alt="归档" title="归档">归档</a></li><li><a href="/links" alt="链接" title="链接">链接</a></li><li><a href="/curriculumvitae" alt="关于" title="关于">关于</a></li></ul><div class="xnews-icon"><a target="_blank" href="https://xcoder.in/atom.xml">&#xe621;</a><a target="_blank" href="https://github.com/XadillaX" style="position: relative; top: -2px;">&#xe735;</a><a target="_blank" href="https://www.zhihu.com/people/xadillax">&#xe63f;</a><a target="_blank" href="https://weibo.com/xadillax" style="position: relative; top: -2px;">&#xe603;</a></div></nav><div class="space"></div></header><main><article class="full"><h1>CodeForces Round 128 DIV2</h1><span class="post-meta">写于<time> 2012 年 07 月 04 日 11 时 38 分</time><br>更新于<time> 2021 年 05 月 19 日 15 时 15 分</time></span><div class="article-toc"><strong>大纲</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Description"><span class="toc-number">1.</span> <span class="toc-text">Description</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Two-Problems"><span class="toc-number">1.1.</span> <span class="toc-text">Two Problems</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Game-on-Paper"><span class="toc-number">1.2.</span> <span class="toc-text">Game on Paper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Photographer"><span class="toc-number">1.3.</span> <span class="toc-text">Photographer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hit-Ball"><span class="toc-number">1.4.</span> <span class="toc-text">Hit Ball</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Transportation"><span class="toc-number">1.5.</span> <span class="toc-text">Transportation</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Analysis"><span class="toc-number">2.</span> <span class="toc-text">Analysis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Two-Problems-1"><span class="toc-number">2.1.</span> <span class="toc-text">Two Problems</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Game-on-Paper-1"><span class="toc-number">2.2.</span> <span class="toc-text">Game on Paper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Photographer-1"><span class="toc-number">2.3.</span> <span class="toc-text">Photographer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hit-Ball-1"><span class="toc-number">2.4.</span> <span class="toc-text">Hit Ball</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Code"><span class="toc-number">3.</span> <span class="toc-text">Code</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Two-Problems-2"><span class="toc-number">3.1.</span> <span class="toc-text">Two Problems</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Game-on-Paper-2"><span class="toc-number">3.2.</span> <span class="toc-text">Game on Paper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Photographer-2"><span class="toc-number">3.3.</span> <span class="toc-text">Photographer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hit-Ball-2"><span class="toc-number">3.4.</span> <span class="toc-text">Hit Ball</span></a></li></ol></li></ol></div><p>　　这次玩脱了。好不容易四题都做出来，却因为小细节挂了两题。</p>
<h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><h3 id="Two-Problems"><a href="#Two-Problems" class="headerlink" title="Two Problems"></a>Two Problems</h3><p>　　题意就是说，CF有两题，每题初始分A和B，然后每题在每分钟会扣DA和DB分。给你比赛总时间T，问你某个人可不可能拿到X分。（注意可能做出一题、两题或者一题也没做出）</p>
<p>　　(0 ≤ x ≤ 600; 1 ≤ t, a, b, da, db ≤ 300且保证及时比赛时间到了各题的分数也不会小于0)</p>
<h3 id="Game-on-Paper"><a href="#Game-on-Paper" class="headerlink" title="Game on Paper"></a>Game on Paper</h3><p>　　有一个 N<em>N 方格纸。在上面的方格里一格格涂黑。每一步涂一格一共涂 m 次，给定 xi 和 yi。问最少涂几步方格纸里会出现一个 3</em>3 的正方形。</p>
<p>　　(1 ≤ n ≤ 1000, 1 ≤ m ≤ min(n· n, 105))</p>
<h3 id="Photographer"><a href="#Photographer" class="headerlink" title="Photographer"></a>Photographer</h3><p>　　照相内存卡里有d容量。其中高质量照片占a容量、低质量占b容量。然后有n个顾客，每个顾客需要xi张高质量照片和yi张低质量照片。摄影师如果给一个人拍照了，就应该满足他所有要求（即给xi张高质量照片和yi张低质量照片）。问摄影师最多能给几个人拍照。</p>
<p>　　(1 ≤ n ≤ 105, 1 ≤ d ≤ 109, 1 ≤ a ≤ b ≤ 104, 0 ≤ xi, yi ≤ 105)</p>
<h3 id="Hit-Ball"><a href="#Hit-Ball" class="headerlink" title="Hit Ball"></a>Hit Ball</h3><p>　　封闭房间里，从房间的一头最底下的中间以某个方向踢球（一定是网对面踢），问踢到另一头的墙上的时候，x、z各是多少。</p>
<p>　　(各座标以及向量都是小于等于100的正整数)</p>
<p><img src="hit-ball.png" alt="Hit Ball"></p>
<h3 id="Transportation"><a href="#Transportation" class="headerlink" title="Transportation"></a>Transportation</h3><p>　　还没看。</p>
<h2 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h2><h3 id="Two-Problems-1"><a href="#Two-Problems-1" class="headerlink" title="Two Problems"></a>Two Problems</h3><p>　　这题只要注意几个trick就行了：可以做出0题、1题或者2题。直接两个for枚举各题在几分钟内做出来，然后做一下0题、1题的特殊判断就好了。</p>
<h3 id="Game-on-Paper-1"><a href="#Game-on-Paper-1" class="headerlink" title="Game on Paper"></a>Game on Paper</h3><p>　　在每次涂的时候，以当前涂的点位中心，设它为九宫格的其中一个位置（一共九种位置），对于每种位置，都判断其对应的九宫格是不是 3*3 的黑色就好了。(我做的时候在设位置的时候 x - 1, y - 1 手贱敲成了 x - 1, y - 2，lock 之后才发现。悲剧)</p>
<h3 id="Photographer-1"><a href="#Photographer-1" class="headerlink" title="Photographer"></a>Photographer</h3><p>　　贪心。对于每个人将其所需的总容量算出来再进行递增排序。最后求的时候推荐累减的方式判断，因为我累加然后用 int 最后爆范围了。</p>
<h3 id="Hit-Ball-1"><a href="#Hit-Ball-1" class="headerlink" title="Hit Ball"></a>Hit Ball</h3><p>　　首先拿出空间几何的线面相交模板。然后来一个 <code>while</code>，每次循环的时候判断当前所在的点与方向适量形成的直线与 (X, 0, Z) 面的交点在不在终点墙壁大小的范围内。若不是则说明中途撞墙了判断方向向量：x &lt; 0则线面相交判断是不是撞左墙，若是则 x 正负值变一下；x &gt; 0 则线面相交判断是不是撞右墙，若是则 x 正负值变一下。z &lt; 0则判断是不是以求抢地，若是则 z 正负变一下。最后 z &gt; 0 则判断是不是撞天花板，若是则z正负值变一下。然后以球撞击的点为新的起点，与新的方向向量形成新的直线，继续下一次循环。因为房间大小最大是 100 * 100 * 100，而方向向量各方向是 1 到 100 的整数，不是小数，则撞击次数不会很多，直接 <code>while</code> 撞击也不会超。</p>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><h3 id="Two-Problems-2"><a href="#Two-Problems-2" class="headerlink" title="Two Problems"></a>Two Problems</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x, t, a, b, da, db;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d%d%d%d&quot;</span>, &amp;x, &amp;t, &amp;a, &amp;b, &amp;da, &amp;db))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; t; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(x == a - i * da)</span><br><span class="line">            &#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; t; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(x == b - j * db)</span><br><span class="line">                &#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(x == a - i * da + b - j * db)</span><br><span class="line">                &#123;</span><br><span class="line">                    flag = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(flag) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="number">0</span> == x) flag = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, flag ? <span class="string">&quot;YES&quot;</span> : <span class="string">&quot;NO&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Game-on-Paper-2"><a href="#Game-on-Paper-2" class="headerlink" title="Game on Paper"></a>Game on Paper</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> mat[<span class="number">1015</span>][<span class="number">1015</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check2</span><span class="params">(<span class="keyword">int</span> sx, <span class="keyword">int</span> sy)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//if(i == 1 &amp;&amp; j == 1) continue;</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(!mat[sx + i][sy + j]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check2</span>(x, y)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check2</span>(x, y - <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check2</span>(x, y - <span class="number">2</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check2</span>(x - <span class="number">1</span>, y)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check2</span>(x - <span class="number">1</span>, y - <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check2</span>(x - <span class="number">1</span>, y - <span class="number">2</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check2</span>(x - <span class="number">2</span>, y)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check2</span>(x - <span class="number">2</span>, y - <span class="number">1</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">check2</span>(x - <span class="number">2</span>, y - <span class="number">2</span>)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n, m;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">-1</span>;</span><br><span class="line">        <span class="built_in">memset</span>(mat, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(mat));</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">            mat[x + <span class="number">1</span>][y + <span class="number">1</span>] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(ans == <span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">check</span>(x + <span class="number">1</span>, y + <span class="number">1</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    ans = i + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Photographer-2"><a href="#Photographer-2" class="headerlink" title="Photographer"></a>Photographer</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">client</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">int</span> memo;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(client a, client b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.memo &lt; b.memo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">client c[<span class="number">100005</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    __int64 d;</span><br><span class="line">    <span class="keyword">int</span> a, b;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">&quot;%d%I64d&quot;</span>, &amp;n, &amp;d))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);</span><br><span class="line">            c[i].id = i + <span class="number">1</span>;</span><br><span class="line">            c[i].memo = a * x + b * y;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">sort</span>(c, c + n, cmp);</span><br><span class="line">        __int64 sum = <span class="number">0L</span>;</span><br><span class="line">        <span class="keyword">int</span> maxi = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(sum + c[i].memo &lt;= d) sum += c[i].memo, maxi = i;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, maxi + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= maxi; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d%c&quot;</span>, c[i].id, i == maxi ? <span class="string">&#x27;\n&#x27;</span> : <span class="string">&#x27; &#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Hit-Ball-2"><a href="#Hit-Ball-2" class="headerlink" title="Hit Ball"></a>Hit Ball</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-8</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> zero(x) (((x)&gt;0?(x):-(x))&lt;eps)</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point3</span>&#123;</span><span class="keyword">double</span> x,y,z;&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">line3</span>&#123;</span>point3 a,b;&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">plane3</span>&#123;</span>point3 a,b,c;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">point3 <span class="title">xmult</span><span class="params">(point3 u,point3 v)</span></span>&#123;</span><br><span class="line">    point3 ret;</span><br><span class="line">    ret.x=u.y*v.z-v.y*u.z;</span><br><span class="line">    ret.y=u.z*v.x-u.x*v.z;</span><br><span class="line">    ret.z=u.x*v.y-u.y*v.x;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">point3 <span class="title">subt</span><span class="params">(point3 u,point3 v)</span></span>&#123;</span><br><span class="line">    point3 ret;</span><br><span class="line">    ret.x=u.x-v.x;</span><br><span class="line">    ret.y=u.y-v.y;</span><br><span class="line">    ret.z=u.z-v.z;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">point3 <span class="title">pvec</span><span class="params">(plane3 s)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">xmult</span>(<span class="built_in">subt</span>(s.a,s.b),<span class="built_in">subt</span>(s.b,s.c));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">point3 <span class="title">intersection</span><span class="params">(line3 l,plane3 s)</span></span>&#123;</span><br><span class="line">    point3 ret=<span class="built_in">pvec</span>(s);</span><br><span class="line">    <span class="keyword">double</span> t=(ret.x*(s.a.x-l.a.x)+ret.y*(s.a.y-l.a.y)+ret.z*(s.a.z-l.a.z))/</span><br><span class="line">        (ret.x*(l.b.x-l.a.x)+ret.y*(l.b.y-l.a.y)+ret.z*(l.b.z-l.a.z));</span><br><span class="line">    ret.x=l.a.x+(l.b.x-l.a.x)*t;</span><br><span class="line">    ret.y=l.a.y+(l.b.y-l.a.y)*t;</span><br><span class="line">    ret.z=l.a.z+(l.b.z-l.a.z)*t;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">double</span> a, b, m;</span><br><span class="line">    <span class="keyword">double</span> vx, vy, vz;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">&quot;%lf%lf%lf%lf%lf%lf&quot;</span>, &amp;a, &amp;b, &amp;m, &amp;vx, &amp;vy, &amp;vz))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/** 5 walls */</span></span><br><span class="line">        plane3 door, lw, rw, top, ground;</span><br><span class="line">        door.a.x = <span class="number">0</span>, door.a.y = <span class="number">0</span>, door.a.z = <span class="number">0</span>;</span><br><span class="line">        door.b.x = <span class="number">1</span>, door.b.y = <span class="number">0</span>, door.b.z = <span class="number">0</span>;</span><br><span class="line">        door.c.x = <span class="number">0</span>, door.c.y = <span class="number">0</span>, door.c.z = <span class="number">1</span>;</span><br><span class="line">        lw.a.x = <span class="number">0</span>, lw.a.y = <span class="number">0</span>, lw.a.z = <span class="number">0</span>;</span><br><span class="line">        lw.b.x = <span class="number">0</span>, lw.b.y = <span class="number">1</span>, lw.b.z = <span class="number">0</span>;</span><br><span class="line">        lw.c.x = <span class="number">0</span>, lw.c.y = <span class="number">0</span>, lw.c.z = <span class="number">1</span>;</span><br><span class="line">        rw.a.x = a, rw.a.y = <span class="number">0</span>, rw.a.z = <span class="number">0</span>;</span><br><span class="line">        rw.b.x = a, rw.b.y = <span class="number">1</span>, rw.b.z = <span class="number">0</span>;</span><br><span class="line">        rw.c.x = a, rw.c.y = <span class="number">0</span>, rw.c.z = <span class="number">1</span>;</span><br><span class="line">        ground.a.x = <span class="number">0</span>, ground.a.y = <span class="number">0</span>, ground.a.z = <span class="number">0</span>;</span><br><span class="line">        ground.b.x = a, ground.b.y = <span class="number">0</span>, ground.b.z = <span class="number">0</span>;</span><br><span class="line">        ground.c.x = a / <span class="number">2</span>, ground.c.y = m, ground.c.z = <span class="number">0</span>;</span><br><span class="line">        top.a.x = <span class="number">0</span>, top.a.y = <span class="number">0</span>, top.a.z = b;</span><br><span class="line">        top.b.x = a, top.b.y = <span class="number">0</span>, top.b.z = b;</span><br><span class="line">        top.c.x = a / <span class="number">2</span>, top.c.y = m, top.c.z = b;</span><br><span class="line"></span><br><span class="line">        line3 l;</span><br><span class="line"></span><br><span class="line">        l.a.x = a / <span class="number">2</span>;</span><br><span class="line">        l.a.y = m;</span><br><span class="line">        l.a.z = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        l.b.x = (a / <span class="number">2</span>) + vx;</span><br><span class="line">        l.b.y = m + vy;</span><br><span class="line">        l.b.z = vz;</span><br><span class="line"></span><br><span class="line">        point3 v;</span><br><span class="line">        v.x = vx, v.y = vy, v.z = vz;</span><br><span class="line"></span><br><span class="line">        point3 myans;</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            point3 ans, ans1, ans2, ans3, ans4;</span><br><span class="line">            <span class="built_in">memset</span>(&amp;ans1, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(point3));</span><br><span class="line">            <span class="built_in">memset</span>(&amp;ans2, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(point3));</span><br><span class="line">            <span class="built_in">memset</span>(&amp;ans3, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(point3));</span><br><span class="line">            <span class="built_in">memset</span>(&amp;ans4, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(point3));</span><br><span class="line"></span><br><span class="line">            ans = <span class="built_in">intersection</span>(l, door);</span><br><span class="line">            <span class="keyword">if</span>(ans.x &gt;= <span class="number">0</span> &amp;&amp; ans.z &gt;= <span class="number">0</span> &amp;&amp; ans.x &lt;= a &amp;&amp; ans.z &lt;= b)</span><br><span class="line">            &#123;</span><br><span class="line">                myans = ans;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            point3 totans;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(v.x &lt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ans1 = <span class="built_in">intersection</span>(l, lw);</span><br><span class="line">                <span class="keyword">if</span>(ans1.z &gt;= <span class="number">0</span> &amp;&amp; ans1.z &lt;= b)</span><br><span class="line">                &#123;</span><br><span class="line">                    v.x = -v.x;</span><br><span class="line">                    totans = ans1;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">if</span>(v.x &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ans2 = <span class="built_in">intersection</span>(l, rw);</span><br><span class="line">                <span class="keyword">if</span>(ans2.z &gt;= <span class="number">0</span> &amp;&amp; ans2.z &lt;= b)</span><br><span class="line">                &#123;</span><br><span class="line">                    v.x = -v.x;</span><br><span class="line">                    totans = ans2;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(v.z &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ans3 = <span class="built_in">intersection</span>(l, top);</span><br><span class="line">                <span class="keyword">if</span>(ans3.x &gt;= <span class="number">0</span> &amp;&amp; ans3.x &lt;= a)</span><br><span class="line">                &#123;</span><br><span class="line">                    v.z = -v.z;</span><br><span class="line">                    totans = ans3;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">if</span>(v.z &lt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                ans4 = <span class="built_in">intersection</span>(l, ground);</span><br><span class="line">                <span class="keyword">if</span>(ans4.x &gt;= <span class="number">0</span> &amp;&amp; ans4.x &lt;= a)</span><br><span class="line">                &#123;</span><br><span class="line">                    v.z = -v.z;</span><br><span class="line">                    totans = ans4;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            l.a = totans;</span><br><span class="line">            l.b = totans;</span><br><span class="line">            l.b.x += v.x;</span><br><span class="line">            l.b.y += v.y;</span><br><span class="line">            l.b.z += v.z;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%.10lf %.10lf\n&quot;</span>, myans.x, myans.z);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr><section class="comment"><div id="disqus_thread"></div></section><script>var DISQUS_PAGE_URL = "https://xcoder.in/2012/07/04/codeforces-128-div2/";</script><script>var DISQUS_IDENTIFIER = "2012/07/04/codeforces-128-div2/";</script><script>var DISQUS_SHORT_NAME = "xcoder"</script><script>var disqus_config = function() {
  this.page.url = DISQUS_PAGE_URL;
  this.page.identifier = DISQUS_IDENTIFIER;
};

(function() {
  var d = document, s = d.createElement("script");
  s.src = "https://" + DISQUS_SHORT_NAME + ".disqus.com/embed.js";
  s.setAttribute("data-timestamp", +new Date());
  (d.head || d.body).appendChild(s);
})();</script><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><footer><section class="copyright">&copy; 2016 - 2021<a href="/">死月·吃圡蕾特</a></section><section class="intro">由<a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>驱动&middot;挂载<a target="_blank" rel="noopener" href="https://github.com/xadillax/hexo-xnew">X'new</a>主题</section></footer></article></main><script src="//cdn.bootcss.com/Han/3.3.0/han.min.js"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><script src="//cdn.bootcss.com/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script><script src="/scripts/highlight.pack.js"></script><script>$(function() {
    $("header").backstretch("/images/header.jpeg");

    $("figure.highlight").each(function(i, block) {
        $(block).removeClass("highlight");
        $(block).find("td.gutter").remove();
        $("<pre><code class='__tobehl " + ($(block).attr("class") === "plain" ? "" : ("lang-" + $(block).attr("class"))) + "'></code></pre>").insertAfter($(block));
        $(block).next().find("code").text((block.innerText || block.textContent));
        $(block).remove();
    });
    $(".__tobehl").each(function(i, block) {
        hljs.highlightBlock(block);
    });

    $("article.full img").each(function() {
        if($(this).parent().is("article")) {
            $(this).wrap("<p style='text-align: center;'></p>");
        } else {
            $(this).parent().css("text-align", "center");
        }
    });

    if($(".article-toc").children().length < 2) {
        $(".article-toc").css("display", "none");
    }
});</script></body></html>