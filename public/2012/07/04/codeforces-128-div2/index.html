

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    
    <meta name="author" content="小鳥遊死月">
    
    <meta name="description" content="這次玩脫了。好不容易四題都做出來，卻因爲小細節掛了兩題。
Description
Two Problems
　　題意就是說，CF有兩題，每題初始分A和B，然後每題在每分鐘會扣DA和DB分。給你比賽總時間T，問你某個人可不可能拿到X分。（注意可能做出一題、兩題或者一題也沒做出）
　　(0 ≤ x ≤ ">
    
    

    
    
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CodeForces Round 128 DIV2 | 艾克斯の編碼者 · 一個偽宅级别的蒟蒻碼畜。</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">

    <!-- Javascript -->
    <script src="/js/jquery-2.1.0.min.js"></script>
    <script src="/js/jquery.backstretch.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/headroom.min.js"></script>
    <script src="/js/jquery.headroom.min.js"></script> 
    <script src="/js/common.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://xcoder.in/" title="艾克斯の編碼者">艾克斯の編碼者</a>
            </div>

            <div role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
                <p class="navbar-text pull-right">一個偽宅级别的蒟蒻碼畜。</p>

                <ul class="nav navbar-nav">
                    
                    <li id="nav-index"><a href="/">首页</a></li>
                    
                    <li id="nav-archives"><a href="/archives">归档</a></li>
                    
                    <li id="nav-tags"><a href="/tags">标签</a></li>
                    
                    <li id="nav-categories"><a href="/categories">分类</a></li>
                    
                    <li id="nav-curriculumvitae"><a href="/curriculumvitae">关于</a></li>
                    
                    <li id="nav-links"><a href="/links">链接</a></li>
                    
                    
                    <li><a href="https://github.com/XadillaX" target="_blank">GitHub</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <script>
    var backRoot = "/images/background/";
    var backArray = [ "1.jpeg", "2.jpeg", "3.jpeg", "4.jpeg", "5.jpeg", "6.jpeg", "img/iPad_Photo_20140328181354FGPM.JPG", "img/iPad_Photo_20140328181218SLUY.JPG", "img/iPad_Photo_20140328181239ME9E.JPG", "img/iPad_Photo_20140328175718BF7T.JPG", "likeit/465_16170978_35afb62980c6d1a.jpg", "likeit/wallpaper-86487.jpg", "likeit/wallpaper-651939.jpg", "likeit/wallpaper-648634.jpg", "likeit/wallpaper-657798.jpg", "likeit/wallpaper-1479749.jpg", "likeit/wallpaper-1961179.jpg", "likeit/wallpaper-1947874.jpg", "likeit/wallpaper-2055407.jpg", "likeit/wallpaper-2060090.png", "likeit/wallpaper-2142870.jpg", "likeit/wallpaper-2078006.jpg", "likeit/wallpaper-2127699.jpg", "likeit/wallpaper-2211066.jpg", "likeit/wallpaper-2588686.jpg", "likeit/wallpaper-2639031.jpg", "likeit/wallpaper-2430341.jpg", "likeit/wallpaper-2294985.jpg", "likeit/wallpaper-2705897.jpg", "likeit/wallpaper-2063319.jpg", "likeit/wallpaper-2060101.jpg", "likeit/wallpaper-1970791.jpg", "img/iPad_Photo_20140328174508AZ11.JPG", "img/new/iPad_Photo_201403281903078UKK.JPG", "img/iPad_Photo_20140328175639RA5N.JPG", "img/iPad_Photo_20140328175820DYAC.JPG", "img/iPad_Photo_201403281806230195.JPG", "img/new/iPad_Photo_201403281919292STQ.JPG", "img/new/iPad_Photo_20140328190703781D.JPG", "flandre/p541758_2girls barefoot bat_wings bed blonde_hair blue_hair feet fetal_position flandre_scarlet flat_chest hat nude red_eyes ~.jpg", "flandre/p575023_blonde_hair flandre_scarlet hat horumon multiple_persona ponytail red_eyes side_ponytail touhou wings.jpg", "flandre/p569665_2girls barefoot blonde_hair blue_hair flandre_scarlet hat highres kinoko red_eyes remilia_scarlet siblings sisters to~.jpg", "flandre/p566082_blonde_hair flandre_scarlet hat mitsuki_(artist) ponytail red_eyes short_hair side_ponytail touhou wings.jpg", "flandre/p548132_2girls bat_wings blonde_hair blue_eyes blue_hair flandre_scarlet hat kaedena_akino mask moon red_eyes red_moon remili~.jpg", "flandre/p552906_flandre_scarlet gusutafu hong_meiling izayoi_sakuya koakuma patchouli_knowledge remilia_scarlet swimsuit touhou.jpg", "flandre/p551605_flandre_scarlet kona-ta touhou.jpg", "flandre/p551983_asuka_roze danmaku flandre_scarlet remilia_scarlet touhou.jpg", "likeit/465_16170978_2b89f5997bcff44.jpg", "likeit/wallpaper-616321.jpg", "likeit/wallpaper-343717.jpg", "likeit/wallpaper-1595016.jpg", "likeit/wallpaper-1952396.jpg", "likeit/wallpaper-2060096.jpg", "likeit/wallpaper-2315398.jpg", "likeit/wallpaper-2674370.jpg", "likeit/wallpaper-2838683.jpg", "likeit/wallpaper-2564028.png", "likeit/wallpaper-1382762.jpg", "likeit/wallpaper-1128042.jpg", "likeit/wallpaper-1396368.jpg", "likeit/wallpaper-1403569.png", "likeit/wallpaper-1593633.jpg", "likeit/wallpaper-1395408.jpg", "flandre/p539131_blonde_hair flandre_scarlet hat plastic_eraser red_eyes scenery short_hair solo touhou.jpg", "flandre/p555228_flandre_scarlet hong_meiling izayoi_sakuya patchouli_knowledge remilia_scarlet shomon swimsuit touhou.jpg", "flandre/p556145_book flandre_scarlet flower hairband hakurei_reimu hat hitoto hong_meiling izayoi_sakuya kirisame_marisa koakuma patc~.jpg", "flandre/p561220_arikichi_gen blonde_hair blue_eyes blue_hair braid flandre_scarlet izayoi_sakuya ponytail red_eyes remilia_scarlet sh~.jpg", "flandre/p541363_blonde_hair flandre_scarlet hat laevatein magic_circle poncho_(pixiv) red_eyes side_ponytail touhou wings.jpg",  ];
    //console.log(backArray);
        
    $(function() {
        // page-id...
        var pageId = "2012/07/04/codeforces-128-div2/";
        pageId = pageId.substr(0, pageId.indexOf("/"));
        if(pageId === "") pageId = "index";
        
        $("#nav-" + pageId).addClass("active");
    });
    </script>
    <article class="post container">
    <div class="well post-body first-post last-post">
        <h1>CodeForces Round 128 DIV2</h1>
        
        <div class="time-info">
发表于:<time datetime="2012-07-04T02:38:59.000Z" itemprop="datePublished">2012年07月04日</time>,
更新于:<time datetime="2014-09-27T16:41:49.000Z" itemprop="dateModified">2014年09月28日</time>,
By <a href="http://xcoder.in/" title="小鳥遊死月">小鳥遊死月</a>
        </div>
        
        <div class="post-body-inner">
            <div id="toc" class="toc-article well">
                <strong class="toc-title">大纲</strong>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Description"><span class="toc-number">1.</span> <span class="toc-text">Description</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Two_Problems"><span class="toc-number">1.1.</span> <span class="toc-text">Two Problems</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Game_on_Paper"><span class="toc-number">1.2.</span> <span class="toc-text">Game on Paper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Photographer"><span class="toc-number">1.3.</span> <span class="toc-text">Photographer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hit_Ball"><span class="toc-number">1.4.</span> <span class="toc-text">Hit Ball</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Transportation"><span class="toc-number">1.5.</span> <span class="toc-text">Transportation</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#Analysis"><span class="toc-number">2.</span> <span class="toc-text">Analysis</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Two_Problems-1"><span class="toc-number">2.1.</span> <span class="toc-text">Two Problems</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Game_on_Paper-1"><span class="toc-number">2.2.</span> <span class="toc-text">Game on Paper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Photographer-1"><span class="toc-number">2.3.</span> <span class="toc-text">Photographer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hit_Ball-1"><span class="toc-number">2.4.</span> <span class="toc-text">Hit Ball</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#Code"><span class="toc-number">3.</span> <span class="toc-text">Code</span></a></li><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Two_Problems-1"><span class="toc-number">3.1.</span> <span class="toc-text">Two Problems</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Game_on_Paper-1"><span class="toc-number">3.2.</span> <span class="toc-text">Game on Paper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Photographer-2"><span class="toc-number">3.3.</span> <span class="toc-text">Photographer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hit_Ball-1"><span class="toc-number">3.4.</span> <span class="toc-text">Hit Ball</span></a></li></ol>
            </div>
            
            <p>這次玩脫了。好不容易四題都做出來，卻因爲小細節掛了兩題。</p>
<h2 id="Description">Description</h2>
<h3 id="Two_Problems">Two Problems</h3>
<p>　　題意就是說，CF有兩題，每題初始分A和B，然後每題在每分鐘會扣DA和DB分。給你比賽總時間T，問你某個人可不可能拿到X分。（注意可能做出一題、兩題或者一題也沒做出）</p>
<p>　　(0 ≤ x ≤ 600; 1 ≤ t, a, b, da, db ≤ 300且保證及時比賽時間到了各題的分數也不會小於0)</p>
<h3 id="Game_on_Paper">Game on Paper</h3>
<p>　　有一個 N<em>N 方格紙。在上面的方格里一格格塗黑。每一步塗一格一共塗 m 次，給定 xi 和 yi。問最少塗幾步方格紙裏會出現一個 3</em>3 的正方形。</p>
<p>　　(1 ≤ n ≤ 1000, 1 ≤ m ≤ min(n· n, 105))</p>
<h3 id="Photographer">Photographer</h3>
<p>　　照相內存卡里有d容量。其中高質量照片佔a容量、低質量佔b容量。然後有n個顧客，每個顧客需要xi張高質量照片和yi張低質量照片。攝影師如果給一個人拍照了，就應該滿足他所有要求（即給xi張高質量照片和yi張低質量照片）。問攝影師最多能給幾個人拍照。</p>
<p>　　(1 ≤ n ≤ 105, 1 ≤ d ≤ 109, 1 ≤ a ≤ b ≤ 104, 0 ≤ xi, yi ≤ 105)</p>
<h3 id="Hit_Ball">Hit Ball</h3>
<p>　　封閉房間裏，從房間的一頭最底下的中間以某個方向踢球（一定是網對面踢），問踢到另一頭的牆上的時候，x、z各是多少。</p>
<p>　　(各座標以及向量都是小於等於100的正整數)</p>
<p><img src="hit-ball.png" alt="Hit Ball"></p>
<h3 id="Transportation">Transportation</h3>
<p>　　還沒看。</p>
<h2 id="Analysis">Analysis</h2>
<h3 id="Two_Problems-1">Two Problems</h3>
<p>　　這題只要注意幾個trick就行了：可以做出0題、1題或者2題。直接兩個for枚舉各題在幾分鐘內做出來，然後做一下0題、1題的特殊判斷就好了。</p>
<h3 id="Game_on_Paper-1">Game on Paper</h3>
<p>　　在每次塗的時候，以當前塗的點位中心，設它爲九宮格的其中一個位置（一共九種位置），對於每種位置，都判斷其對應的九宮格是不是 3*3 的黑色就好了。(我做的時候在設位置的時候 x - 1, y - 1 手賤敲成了 x - 1, y - 2，lock 之後才發現。悲劇)</p>
<h3 id="Photographer-1">Photographer</h3>
<p>　　貪心。對於每個人將其所需的總容量算出來再進行遞增排序。最後求的時候推薦累減的方式判斷，因爲我累加然後用 int 最後爆範圍了。</p>
<h3 id="Hit_Ball-1">Hit Ball</h3>
<p>　　首先拿出空間幾何的線面相交模板。然後來一個 <code>while</code>，每次循環的時候判斷當前所在的點與方向適量形成的直線與 (X, 0, Z) 面的交點在不在終點牆壁大小的範圍內。若不是則說明中途撞牆了判斷方向向量：x &lt; 0則線面相交判斷是不是撞左牆，若是則 x 正負值變一下；x &gt; 0 則線面相交判斷是不是撞右牆，若是則 x 正負值變一下。z &lt; 0則判斷是不是以求搶地，若是則 z 正負變一下。最後 z &gt; 0 則判斷是不是撞天花板，若是則z正負值變一下。然後以球撞擊的點爲新的起點，與新的方向向量形成新的直線，繼續下一次循環。因爲房間大小最大是 100 <em> 100 </em> 100，而方向向量各方向是 1 到 100 的整數，不是小數，則撞擊次數不會很多，直接 <code>while</code> 撞擊也不會超。</p>
<h2 id="Code">Code</h2>
<h3 id="Two_Problems-1">Two Problems</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre></td><td class="code"><pre><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">int</span> main()
{
    <span class="keyword">int</span> x, t, a, b, da, db;
    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d%d%d"</span>, &x, &t, &a, &b, &da, &db))
    {
        <span class="keyword">bool</span> flag = <span class="keyword">false</span>;
        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; t; i++)
        {
            <span class="keyword">if</span>(x == a - i * da)
            {
                flag = <span class="keyword">true</span>;
                <span class="keyword">break</span>;
            }

            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; t; j++)
            {
                <span class="keyword">if</span>(x == b - j * db)
                {
                    flag = <span class="keyword">true</span>;
                    <span class="keyword">break</span>;
                }

                <span class="keyword">if</span>(x == a - i * da + b - j * db)
                {
                    flag = <span class="keyword">true</span>;
                    <span class="keyword">break</span>;
                }
            }
            <span class="keyword">if</span>(flag) <span class="keyword">break</span>;
        }
        <span class="keyword">if</span>(<span class="number">0</span> == x) flag = <span class="keyword">true</span>;

        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, flag ? <span class="string">"YES"</span> : <span class="string">"NO"</span>);
    }

    <span class="keyword">return</span> <span class="number">0</span>;
}
</pre></td></tr></table></figure>

<h3 id="Game_on_Paper-1">Game on Paper</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre></td><td class="code"><pre><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">bool</span> mat[<span class="number">1015</span>][<span class="number">1015</span>];

<span class="keyword">bool</span> check2(<span class="keyword">int</span> sx, <span class="keyword">int</span> sy)
{
    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)
    {
        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++)
        {
            <span class="comment">//if(i == 1 && j == 1) continue;</span>

            <span class="keyword">if</span>(!mat[sx + i][sy + j]) <span class="keyword">return</span> <span class="keyword">false</span>;
        }
    }

    <span class="keyword">return</span> <span class="keyword">true</span>;
}

<span class="keyword">bool</span> check(<span class="keyword">int</span> x, <span class="keyword">int</span> y)
{
    <span class="keyword">if</span>(check2(x, y)) <span class="keyword">return</span> <span class="keyword">true</span>;
    <span class="keyword">if</span>(check2(x, y - <span class="number">1</span>)) <span class="keyword">return</span> <span class="keyword">true</span>;
    <span class="keyword">if</span>(check2(x, y - <span class="number">2</span>)) <span class="keyword">return</span> <span class="keyword">true</span>;
    <span class="keyword">if</span>(check2(x - <span class="number">1</span>, y)) <span class="keyword">return</span> <span class="keyword">true</span>;
    <span class="keyword">if</span>(check2(x - <span class="number">1</span>, y - <span class="number">1</span>)) <span class="keyword">return</span> <span class="keyword">true</span>;
    <span class="keyword">if</span>(check2(x - <span class="number">1</span>, y - <span class="number">2</span>)) <span class="keyword">return</span> <span class="keyword">true</span>;
    <span class="keyword">if</span>(check2(x - <span class="number">2</span>, y)) <span class="keyword">return</span> <span class="keyword">true</span>;
    <span class="keyword">if</span>(check2(x - <span class="number">2</span>, y - <span class="number">1</span>)) <span class="keyword">return</span> <span class="keyword">true</span>;
    <span class="keyword">if</span>(check2(x - <span class="number">2</span>, y - <span class="number">2</span>)) <span class="keyword">return</span> <span class="keyword">true</span>;

    <span class="keyword">return</span> <span class="keyword">false</span>;
}

<span class="keyword">int</span> main()
{
    <span class="keyword">int</span> n, m;
    <span class="keyword">int</span> x, y;
    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &n, &m))
    {
        <span class="keyword">int</span> ans = -<span class="number">1</span>;
        <span class="built_in">memset</span>(mat, <span class="number">0</span>, <span class="keyword">sizeof</span>(mat));
        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)
        {
            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &x, &y);
            mat[x + <span class="number">1</span>][y + <span class="number">1</span>] = <span class="keyword">true</span>;

            <span class="keyword">if</span>(ans == -<span class="number">1</span>)
            {
                <span class="keyword">if</span>(check(x + <span class="number">1</span>, y + <span class="number">1</span>))
                {
                    ans = i + <span class="number">1</span>;
                }
            }
        }

        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);
    }

    <span class="keyword">return</span> <span class="number">0</span>;
}
</pre></td></tr></table></figure>

<h3 id="Photographer-2">Photographer</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre></td><td class="code"><pre><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;algorithm&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="keyword">struct</span> client
{
    <span class="keyword">int</span> id;
    <span class="keyword">int</span> memo;
};

<span class="keyword">bool</span> cmp(client a, client b)
{
    <span class="keyword">return</span> a.memo &lt; b.memo;
}

client c[<span class="number">100005</span>];

<span class="keyword">int</span> main()
{
    <span class="keyword">int</span> n;
    __int64 d;
    <span class="keyword">int</span> a, b;
    <span class="keyword">int</span> x, y;

    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%d%I64d"</span>, &n, &d))
    {
        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &a, &b);
        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)
        {
            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &x, &y);
            c[i].id = i + <span class="number">1</span>;
            c[i].memo = a * x + b * y;
        }

        sort(c, c + n, cmp);
        __int64 sum = <span class="number">0L</span>;
        <span class="keyword">int</span> maxi = -<span class="number">1</span>;
        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)
        {
            <span class="keyword">if</span>(sum + c[i].memo &lt;= d) sum += c[i].memo, maxi = i;
            <span class="keyword">else</span> <span class="keyword">break</span>;
        }

        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, maxi + <span class="number">1</span>);
        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= maxi; i++)
        {
            <span class="built_in">printf</span>(<span class="string">"%d%c"</span>, c[i].id, i == maxi ? <span class="string">'\n'</span> : <span class="string">' '</span>);
        }
    }

    <span class="keyword">return</span> <span class="number">0</span>;
}
</pre></td></tr></table></figure>

<h3 id="Hit_Ball-1">Hit Ball</h3>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
</pre></td><td class="code"><pre><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;math.h&gt;</span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;
<span class="preprocessor">#define eps 1e-8</span>
<span class="preprocessor">#define zero(x) (((x)&gt;0?(x):-(x))&lt;eps)</span>
<span class="keyword">struct</span> point3{<span class="keyword">double</span> x,y,z;};
<span class="keyword">struct</span> line3{point3 a,b;};
<span class="keyword">struct</span> plane3{point3 a,b,c;};

point3 xmult(point3 u,point3 v){
    point3 ret;
    ret.x=u.y*v.z-v.y*u.z;
    ret.y=u.z*v.x-u.x*v.z;
    ret.z=u.x*v.y-u.y*v.x;
    <span class="keyword">return</span> ret;
}

point3 subt(point3 u,point3 v){
    point3 ret;
    ret.x=u.x-v.x;
    ret.y=u.y-v.y;
    ret.z=u.z-v.z;
    <span class="keyword">return</span> ret;
}

point3 pvec(plane3 s){
    <span class="keyword">return</span> xmult(subt(s.a,s.b),subt(s.b,s.c));
}

point3 intersection(line3 l,plane3 s){
    point3 ret=pvec(s);
    <span class="keyword">double</span> t=(ret.x*(s.a.x-l.a.x)+ret.y*(s.a.y-l.a.y)+ret.z*(s.a.z-l.a.z))/
        (ret.x*(l.b.x-l.a.x)+ret.y*(l.b.y-l.a.y)+ret.z*(l.b.z-l.a.z));
    ret.x=l.a.x+(l.b.x-l.a.x)*t;
    ret.y=l.a.y+(l.b.y-l.a.y)*t;
    ret.z=l.a.z+(l.b.z-l.a.z)*t;
    <span class="keyword">return</span> ret;
}

<span class="keyword">int</span> main()
{
    <span class="keyword">double</span> a, b, m;
    <span class="keyword">double</span> vx, vy, vz;

    <span class="keyword">while</span>(~<span class="built_in">scanf</span>(<span class="string">"%lf%lf%lf%lf%lf%lf"</span>, &a, &b, &m, &vx, &vy, &vz))
    {
        <span class="comment">/** 5 walls */</span>
        plane3 door, lw, rw, top, ground;
        door.a.x = <span class="number">0</span>, door.a.y = <span class="number">0</span>, door.a.z = <span class="number">0</span>;
        door.b.x = <span class="number">1</span>, door.b.y = <span class="number">0</span>, door.b.z = <span class="number">0</span>;
        door.c.x = <span class="number">0</span>, door.c.y = <span class="number">0</span>, door.c.z = <span class="number">1</span>;
        lw.a.x = <span class="number">0</span>, lw.a.y = <span class="number">0</span>, lw.a.z = <span class="number">0</span>;
        lw.b.x = <span class="number">0</span>, lw.b.y = <span class="number">1</span>, lw.b.z = <span class="number">0</span>;
        lw.c.x = <span class="number">0</span>, lw.c.y = <span class="number">0</span>, lw.c.z = <span class="number">1</span>;
        rw.a.x = a, rw.a.y = <span class="number">0</span>, rw.a.z = <span class="number">0</span>;
        rw.b.x = a, rw.b.y = <span class="number">1</span>, rw.b.z = <span class="number">0</span>;
        rw.c.x = a, rw.c.y = <span class="number">0</span>, rw.c.z = <span class="number">1</span>;
        ground.a.x = <span class="number">0</span>, ground.a.y = <span class="number">0</span>, ground.a.z = <span class="number">0</span>;
        ground.b.x = a, ground.b.y = <span class="number">0</span>, ground.b.z = <span class="number">0</span>;
        ground.c.x = a / <span class="number">2</span>, ground.c.y = m, ground.c.z = <span class="number">0</span>;
        top.a.x = <span class="number">0</span>, top.a.y = <span class="number">0</span>, top.a.z = b;
        top.b.x = a, top.b.y = <span class="number">0</span>, top.b.z = b;
        top.c.x = a / <span class="number">2</span>, top.c.y = m, top.c.z = b;

        line3 l;

        l.a.x = a / <span class="number">2</span>;
        l.a.y = m;
        l.a.z = <span class="number">0</span>;

        l.b.x = (a / <span class="number">2</span>) + vx;
        l.b.y = m + vy;
        l.b.z = vz;

        point3 v;
        v.x = vx, v.y = vy, v.z = vz;

        point3 myans;
        <span class="keyword">while</span>(<span class="keyword">true</span>)
        {
            point3 ans, ans1, ans2, ans3, ans4;
            <span class="built_in">memset</span>(&ans1, <span class="number">0</span>, <span class="keyword">sizeof</span>(point3));
            <span class="built_in">memset</span>(&ans2, <span class="number">0</span>, <span class="keyword">sizeof</span>(point3));
            <span class="built_in">memset</span>(&ans3, <span class="number">0</span>, <span class="keyword">sizeof</span>(point3));
            <span class="built_in">memset</span>(&ans4, <span class="number">0</span>, <span class="keyword">sizeof</span>(point3));

            ans = intersection(l, door);
            <span class="keyword">if</span>(ans.x &gt;= <span class="number">0</span> && ans.z &gt;= <span class="number">0</span> && ans.x &lt;= a && ans.z &lt;= b)
            {
                myans = ans;
                <span class="keyword">break</span>;
            }

            point3 totans;

            <span class="keyword">if</span>(v.x &lt; <span class="number">0</span>)
            {
                ans1 = intersection(l, lw);
                <span class="keyword">if</span>(ans1.z &gt;= <span class="number">0</span> && ans1.z &lt;= b)
                {
                    v.x = -v.x;
                    totans = ans1;
                }
            }
            <span class="keyword">else</span>
            <span class="keyword">if</span>(v.x &gt; <span class="number">0</span>)
            {
                ans2 = intersection(l, rw);
                <span class="keyword">if</span>(ans2.z &gt;= <span class="number">0</span> && ans2.z &lt;= b)
                {
                    v.x = -v.x;
                    totans = ans2;
                }
            }

            <span class="keyword">if</span>(v.z &gt; <span class="number">0</span>)
            {
                ans3 = intersection(l, top);
                <span class="keyword">if</span>(ans3.x &gt;= <span class="number">0</span> && ans3.x &lt;= a)
                {
                    v.z = -v.z;
                    totans = ans3;
                }
            }
            <span class="keyword">else</span>
            <span class="keyword">if</span>(v.z &lt; <span class="number">0</span>)
            {
                ans4 = intersection(l, ground);
                <span class="keyword">if</span>(ans4.x &gt;= <span class="number">0</span> && ans4.x &lt;= a)
                {
                    v.z = -v.z;
                    totans = ans4;
                }
            }

            l.a = totans;
            l.b = totans;
            l.b.x += v.x;
            l.b.y += v.y;
            l.b.z += v.z;
        }

        <span class="built_in">printf</span>(<span class="string">"%.10lf %.10lf\n"</span>, myans.x, myans.z);
    }

    <span class="keyword">return</span> <span class="number">0</span>;
}
</pre></td></tr></table></figure>


            
            <section class="comment">
	<div class="ds-thread"></div>
</section>

<script type="text/javascript">
  var duoshuoQuery = {short_name:"xcoder-ghost"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 
        </div>
    </div>
</article>

    <footer id="footer">
    <div id="bottom-tip">
        艾克斯の編碼者 —— <small>一個偽宅级别的蒟蒻碼畜。</small>
    </div>
        <small>该博客由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动，搭载 <a href="https://github.com/XadillaX/hexadillax" target="_blank">Hexadillax</a> 主题</small><br />
        <small>&copy; 2014 XadillaX</small>
    </footer>
</body>
</html>
