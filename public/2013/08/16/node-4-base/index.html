

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    
    <meta name="author" content="小鳥遊死月">
    
    <meta name="description" content="Node.js 的基礎是 JavaScript 這門 腳本語言。而大多數的腳本語言一個共同的特點就是“弱類型”。
　　不同於 PHP 的是，PHP 就是是有了新變量也無需申明，而 JavaScript 則還是需要 var 來申明一下的。而這個 var 涵蓋了 C++ 中的int、string、cha">
    
    

    
    <link rel="alternative" href="http://xcoder.in/atom.xml" title="艾克斯の編碼者" type="application/atom+xml">
    
    
    

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>一起擼Node.JS（壹）——基本語法和類型 | 艾克斯の編碼者 · 一個偽宅级别的蒟蒻碼畜。</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">

    <!-- Javascript -->
    <script src="/js/jquery-2.1.0.min.js"></script>
    <script src="/js/jquery.backstretch.min.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js"></script>
    <script src="/js/headroom.min.js"></script>
    <script src="/js/jquery.headroom.min.js"></script> 
    <script src="/js/common.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://xcoder.in" title="艾克斯の編碼者">艾克斯の編碼者</a>
            </div>

            <div role="navigation" class="collapse navbar-collapse bs-navbar-collapse">
                <p class="navbar-text pull-right">一個偽宅级别的蒟蒻碼畜。</p>

                <ul class="nav navbar-nav">
                    
                    <li id="nav-index"><a href="/">首页</a></li>
                    
                    <li id="nav-archives"><a href="/archives">归档</a></li>
                    
                    <li id="nav-tags"><a href="/tags">标签</a></li>
                    
                    <li id="nav-categories"><a href="/categories">分类</a></li>
                    
                    <li id="nav-curriculumvitae"><a href="/curriculumvitae">关于</a></li>
                    
                    <li id="nav-links"><a href="/links">链接</a></li>
                    
                    
                    <li><a href="https://github.com/XadillaX" target="_blank">GitHub</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <script>
    var backRoot = "/images/background/";
    var backArray = [ "1.jpeg", "2.jpeg", "3.jpeg", "4.jpeg", "5.jpeg", "6.jpeg", "img/iPad_Photo_20140328181354FGPM.JPG", "img/iPad_Photo_20140328181218SLUY.JPG", "img/iPad_Photo_20140328181239ME9E.JPG", "img/iPad_Photo_20140328175718BF7T.JPG", "likeit/465_16170978_35afb62980c6d1a.jpg", "likeit/wallpaper-86487.jpg", "likeit/wallpaper-651939.jpg", "likeit/wallpaper-648634.jpg", "likeit/wallpaper-657798.jpg", "likeit/wallpaper-1479749.jpg", "likeit/wallpaper-1961179.jpg", "likeit/wallpaper-1947874.jpg", "likeit/wallpaper-2055407.jpg", "likeit/wallpaper-2060090.png", "likeit/wallpaper-2142870.jpg", "likeit/wallpaper-2078006.jpg", "likeit/wallpaper-2127699.jpg", "likeit/wallpaper-2211066.jpg", "likeit/wallpaper-2588686.jpg", "likeit/wallpaper-2639031.jpg", "likeit/wallpaper-2430341.jpg", "likeit/wallpaper-2294985.jpg", "likeit/wallpaper-2705897.jpg", "likeit/wallpaper-2063319.jpg", "likeit/wallpaper-2060101.jpg", "likeit/wallpaper-1970791.jpg", "img/iPad_Photo_20140328174508AZ11.JPG", "img/new/iPad_Photo_201403281903078UKK.JPG", "img/iPad_Photo_20140328175639RA5N.JPG", "img/iPad_Photo_20140328175820DYAC.JPG", "img/iPad_Photo_201403281806230195.JPG", "img/new/iPad_Photo_201403281919292STQ.JPG", "img/new/iPad_Photo_20140328190703781D.JPG", "flandre/p541758_2girls barefoot bat_wings bed blonde_hair blue_hair feet fetal_position flandre_scarlet flat_chest hat nude red_eyes ~.jpg", "flandre/p575023_blonde_hair flandre_scarlet hat horumon multiple_persona ponytail red_eyes side_ponytail touhou wings.jpg", "flandre/p569665_2girls barefoot blonde_hair blue_hair flandre_scarlet hat highres kinoko red_eyes remilia_scarlet siblings sisters to~.jpg", "flandre/p566082_blonde_hair flandre_scarlet hat mitsuki_(artist) ponytail red_eyes short_hair side_ponytail touhou wings.jpg", "flandre/p548132_2girls bat_wings blonde_hair blue_eyes blue_hair flandre_scarlet hat kaedena_akino mask moon red_eyes red_moon remili~.jpg", "flandre/p552906_flandre_scarlet gusutafu hong_meiling izayoi_sakuya koakuma patchouli_knowledge remilia_scarlet swimsuit touhou.jpg", "flandre/p551605_flandre_scarlet kona-ta touhou.jpg", "flandre/p551983_asuka_roze danmaku flandre_scarlet remilia_scarlet touhou.jpg", "likeit/465_16170978_2b89f5997bcff44.jpg", "likeit/wallpaper-616321.jpg", "likeit/wallpaper-343717.jpg", "likeit/wallpaper-1595016.jpg", "likeit/wallpaper-1952396.jpg", "likeit/wallpaper-2060096.jpg", "likeit/wallpaper-2315398.jpg", "likeit/wallpaper-2674370.jpg", "likeit/wallpaper-2838683.jpg", "likeit/wallpaper-2564028.png", "likeit/wallpaper-1382762.jpg", "likeit/wallpaper-1128042.jpg", "likeit/wallpaper-1396368.jpg", "likeit/wallpaper-1403569.png", "likeit/wallpaper-1593633.jpg", "likeit/wallpaper-1395408.jpg", "flandre/p539131_blonde_hair flandre_scarlet hat plastic_eraser red_eyes scenery short_hair solo touhou.jpg", "flandre/p555228_flandre_scarlet hong_meiling izayoi_sakuya patchouli_knowledge remilia_scarlet shomon swimsuit touhou.jpg", "flandre/p556145_book flandre_scarlet flower hairband hakurei_reimu hat hitoto hong_meiling izayoi_sakuya kirisame_marisa koakuma patc~.jpg", "flandre/p561220_arikichi_gen blonde_hair blue_eyes blue_hair braid flandre_scarlet izayoi_sakuya ponytail red_eyes remilia_scarlet sh~.jpg", "flandre/p541363_blonde_hair flandre_scarlet hat laevatein magic_circle poncho_(pixiv) red_eyes side_ponytail touhou wings.jpg",  ];
    //console.log(backArray);
        
    $(function() {
        // page-id...
        var pageId = "2013/08/16/node-4-base/";
        pageId = pageId.substr(0, pageId.indexOf("/"));
        if(pageId === "") pageId = "index";
        
        $("#nav-" + pageId).addClass("active");
    });
    </script>
    <article class="post container">
    <div class="well post-body first-post last-post">
        <h1>一起擼Node.JS（壹）——基本語法和類型</h1>
        
        <div class="time-info">
发表于:<time datetime="2013-08-15T16:00:00.000Z" itemprop="datePublished">2013年08月16日</time>，更新于:<time datetime="2015-06-03T07:10:54.000Z" itemprop="dateModified">2015年06月03日</time>，By <a href="http://xcoder.in" title="小鳥遊死月">小鳥遊死月</a>
        </div>
        
        <div class="post-body-inner">
            <div id="toc" class="toc-article well">
                <strong class="toc-title">大纲</strong>
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#基本語法"><span class="toc-number">1.</span> <span class="toc-text">基本語法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#變量聲明"><span class="toc-number">1.1.</span> <span class="toc-text">變量聲明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#循環語句"><span class="toc-number">1.2.</span> <span class="toc-text">循環語句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#for…i"><span class="toc-number">1.2.1.</span> <span class="toc-text">for…i</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#for…in"><span class="toc-number">1.2.2.</span> <span class="toc-text">for…in</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#while…do,_do…while"><span class="toc-number">1.2.3.</span> <span class="toc-text">while…do, do…while</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#運算符"><span class="toc-number">1.3.</span> <span class="toc-text">運算符</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#+,_-,_*,_/"><span class="toc-number">1.3.1.</span> <span class="toc-text">+, -, *, /</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#==,_===,_!=,_!=="><span class="toc-number">1.3.2.</span> <span class="toc-text">==, ===, !=, !==</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#typeof"><span class="toc-number">1.3.3.</span> <span class="toc-text">typeof</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null,_undefined,_NaN"><span class="toc-number">1.4.</span> <span class="toc-text">null, undefined, NaN</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#null"><span class="toc-number">1.4.1.</span> <span class="toc-text">null</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#undefined"><span class="toc-number">1.4.2.</span> <span class="toc-text">undefined</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NaN"><span class="toc-number">1.4.3.</span> <span class="toc-text">NaN</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小雜碎"><span class="toc-number">1.5.</span> <span class="toc-text">小雜碎</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#變量類型"><span class="toc-number">2.</span> <span class="toc-text">變量類型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基礎類型"><span class="toc-number">2.1.</span> <span class="toc-text">基礎類型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON對象"><span class="toc-number">2.2.</span> <span class="toc-text">JSON對象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#類（對象）的基礎"><span class="toc-number">2.3.</span> <span class="toc-text">類（對象）的基礎</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#類的聲明和實例化"><span class="toc-number">2.3.1.</span> <span class="toc-text">類的聲明和實例化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#成員變量"><span class="toc-number">2.3.2.</span> <span class="toc-text">成員變量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#構造函數"><span class="toc-number">2.3.3.</span> <span class="toc-text">構造函數</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#成員函數"><span class="toc-number">2.3.4.</span> <span class="toc-text">成員函數</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#成員函數聲明"><span class="toc-number">2.3.4.1.</span> <span class="toc-text">成員函數聲明</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#★_匿名函數"><span class="toc-number">2.3.5.</span> <span class="toc-text">★ 匿名函數</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#成員函數聲明的匿名函數聲明方式"><span class="toc-number">2.3.6.</span> <span class="toc-text">成員函數聲明的匿名函數聲明方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#類的隨意性"><span class="toc-number">2.3.7.</span> <span class="toc-text">類的隨意性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#附"><span class="toc-number">3.</span> <span class="toc-text">附</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#深拷貝"><span class="toc-number">3.1.</span> <span class="toc-text">深拷貝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#系統默認對象參考手冊"><span class="toc-number">3.2.</span> <span class="toc-text">系統默認對象參考手冊</span></a></li></ol></li></ol>
            </div>
            
            <p><strong>Node.js</strong> 的基礎是 <strong>JavaScript</strong> 這門 <strong><em>腳本語言</em></strong>。而大多數的腳本語言一個共同的特點就是“<a href="http://zh.wikipedia.org/wiki/%E9%A1%9E%E5%9E%8B%E7%B3%BB%E7%B5%B1#.E5.BC.B7.E5.9E.8B.E5.88.A5.E5.92.8C.E5.BC.B1.E5.9E.8B.E5.88.A5" target="_blank" rel="external">弱類型</a>”。</p>
<p>　　不同於 <strong>PHP</strong> 的是，<strong>PHP</strong> 就是是有了新變量也無需申明，而 <strong>JavaScript</strong> 則還是需要 <code>var</code> 來申明一下的。而這個 <code>var</code> 涵蓋了 <strong>C++</strong> 中的<code>int</code>、<code>string</code>、<code>char</code>等一切類型的含義，甚至是 <code>function</code>。</p>
<p>　　本篇以及後篇的所有內容都是在 <strong>Linux</strong> 或者 <strong>Cygwin</strong> 下用 <strong>vim</strong> 進行編輯（若不是則請自行轉變成你自己的方法），然後在命令行下進行查看結果的。</p>
<!-- 我是小小分割符 -->
<h2 id="基本語法">基本語法</h2><h3 id="變量聲明">變量聲明</h3><p>在 <strong>C/C++</strong> 中，我們這麼聲明變量的：</p>
<figure class="highlight cpp"><figcaption><span>c++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> b = <span class="string">'a'</span>;</span><br><span class="line"><span class="keyword">float</span> c = <span class="number">1.0f</span>;</span><br><span class="line"><span class="keyword">void</span> (*d)() = foo;  <span class="comment">///&lt; 忘了是不是這麼寫的了，總之是函數指針</span></span><br></pre></td></tr></table></figure>
<p>而在 <strong>Node.js</strong> 中則是這樣的：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">'a'</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="number">1.0</span>;</span><br><span class="line"><span class="keyword">var</span> d = foo;</span><br></pre></td></tr></table></figure>
<p>所以，無論是什麼類型的變量，在 <strong>Node.js</strong> 中都是以一個 <code>var</code> 來解決的。</p>
<h3 id="循環語句">循環語句</h3><h4 id="for…i">for…i</h4><p>這個循環語句基本上跟 <strong>C/C++</strong> 一樣，都是</p>
<figure class="highlight matlab"><figcaption><span>c++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(int <span class="built_in">i</span> = <span class="number">0</span>; <span class="built_in">i</span> &lt; foo; <span class="built_in">i</span>++)</span><br><span class="line"><span class="cell">&#123;</span><br><span class="line">    //...</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>而鑑於 <strong>Node.js</strong> 是弱類型，所以只需要：</p>
<figure class="highlight matlab"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(var <span class="built_in">i</span> = <span class="number">0</span>; <span class="built_in">i</span> &lt; foo; <span class="built_in">i</span>++) <span class="cell">&#123;</span><br><span class="line">    //...</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="for…in">for…in</h4><p>這是一種後有型的循環語句，類似於 <strong>PHP</strong> 的 <code>foreach</code>。</p>
<p>比如我們有一個 <strong>JSON對象</strong> 如下：</p>
<figure class="highlight kotlin"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> foo</span> = &#123;</span><br><span class="line">    <span class="string">"hello"</span>     : <span class="string">"world"</span>,</span><br><span class="line">    <span class="string">"node"</span>      : <span class="string">"js"</span>,</span><br><span class="line">    <span class="string">"blahblah"</span>  : <span class="string">"bar"</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>這個時候我們就可以用 <code>for...in</code> 來循環遍歷了：</p>
<figure class="highlight processing"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(var <span class="variable">key</span> in foo) &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="variable">key</span> + <span class="string">": "</span> + foo[<span class="variable">key</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我們如果在命令行中打入下面的命令：</p>
<figure class="highlight elixir"><figcaption><span>sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>node foo.js</span><br></pre></td></tr></table></figure>
<p>屏幕上就會顯示下面的內容了：</p>
<figure class="highlight http"><figcaption><span>sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hello</span>: <span class="string">world</span></span><br><span class="line"><span class="attribute">node</span>: <span class="string">js</span></span><br><span class="line"><span class="attribute">blahblah</span>: <span class="string">bar</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>提示</strong>：由上可知，<code>for...in</code> 語句是用來遍歷 <strong>JSON對象</strong>、<strong>數組</strong>、<strong>對象</strong>的鍵名的，而不提供鍵值的遍歷。如果要獲取鍵值，只能通過</p>
</blockquote>
<figure class="highlight fsharp"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo<span class="annotation">[&lt;當前鍵名&gt;]</span></span><br></pre></td></tr></table></figure>
<p>的形式來獲取。這個跟 <strong>PHP</strong> 的 <code>foreach</code> 還是有一定區別的。</p>
<h4 id="while…do,_do…while">while…do, do…while</h4><p>這個就不多做解釋了，跟其它語言沒什麼大的區別，無非就是如果有變量聲明的話，需要用 <code>var</code> 就夠了。</p>
<h3 id="運算符">運算符</h3><h4 id="+,_-,_*,_/">+, -, *, /</h4><p>這幾個運算符也就這樣，要注意的是 <code>+</code>。它既可以作用於字符串，也可以作用於數值運算。弱類型語言雖然說類型是弱的，數字有時候可以以字符串的形態出現，字符串有時候可以用數值的形態出現，但是在必要的時候也還是要說一下它是什麼類型的，我們可以用下面的代碼去看看結果：</p>
<figure class="highlight javascript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"1"</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a + b);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">parseInt</span>(a) + b);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>這裏的 <code>parseInt</code> 是 <strong>Node.js</strong> 的一個內置函數，作用是將一個字符串解析成 <code>int</code> 類型的變量。</p>
</blockquote>
<p>上面的代碼執行結果是</p>
<figure class="highlight"><figcaption><span>sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">12</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<p>第一個 <code>console.log</code> 結果是 <code>12</code>，由於 <code>a</code> 是字符串，所以 <code>b</code> 也被系統以字符串的姿態進行加操作，結果就是將兩個字符串黏連在一起就變成了 <code>12</code>。而第二個 <code>console.log</code> 結果是 <code>3</code>，是因爲我們將第一個 <code>a</code> 轉變爲了 <code>int</code> 類型，兩個 <code>int</code> 型的變量相加即數值相加，結果當然就是 <code>3</code> 了。</p>
<h4 id="==,_===,_!=,_!==">==, ===, !=, !==</h4><p>這裏有一點要解釋，當這個邏輯運算符長度爲 <code>2</code> 的時候（<code>==</code>, <code>!=</code>），只是判斷外在的值是不是一樣的，而不會判斷類型。如</p>
<figure class="highlight nix"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var <span class="variable">a =</span> <span class="number">1</span>, <span class="variable">b =</span> <span class="string">"1"</span>;</span><br><span class="line">console.log(<span class="variable">a =</span>= b);</span><br></pre></td></tr></table></figure>
<p>它輸出的結果就是 <code>true</code>。但是如果我們在中間判斷的時候再加上一個等號，那麼就是嚴格判斷了，需要類型和值都一樣的時候纔會是 <code>true</code>，否則就是 <code>false</code>。也就是說</p>
<figure class="highlight nix"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var <span class="variable">a =</span> <span class="number">1</span>, <span class="variable">b =</span> <span class="string">"1"</span>;</span><br><span class="line">console.log(<span class="variable">a =</span>== b);</span><br></pre></td></tr></table></figure>
<p>的時候，返回的結果就是 <code>false</code> 了，因爲 <code>a</code> 是 <code>int</code> 型的，而 <code>b</code> 則是字符串。</p>
<blockquote>
<p>順帶着就把條件語句講了吧，其實這裏的 <code>if</code> 跟別的語言沒什麼兩樣，就是幾個邏輯運算符兩個等號三個等號的問題。所以就不多做累述了。</p>
</blockquote>
<h4 id="typeof">typeof</h4><p>這裏我姑且把它當成是一個運算符而不是函數了。</p>
<p>這個運算符的作用是判斷一個變量的類型，會返回一個字符串，即類型名，具體的執行下面的代碼就知道了：</p>
<figure class="highlight stata"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = 0;</span><br><span class="line"><span class="keyword">var</span> b = '噓~蛋花湯在睡覺。';</span><br><span class="line"><span class="keyword">var</span> c = 1.0;</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">d</span> = foo;</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">e</span> = &#123; <span class="string">"a"</span> : a &#125;;</span><br><span class="line"><span class="keyword">var</span> f = [ 1, 2, 3 ];</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">g</span> = null;</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">h</span> = undefined;</span><br><span class="line"></span><br><span class="line">console.<span class="literal">log</span>(<span class="keyword">typeof</span> a);</span><br><span class="line">console.<span class="literal">log</span>(<span class="keyword">typeof</span> b);</span><br><span class="line">console.<span class="literal">log</span>(<span class="keyword">typeof</span> c);</span><br><span class="line">console.<span class="literal">log</span>(<span class="keyword">typeof</span> <span class="keyword">d</span>);</span><br><span class="line">console.<span class="literal">log</span>(<span class="keyword">typeof</span> <span class="keyword">e</span>);</span><br><span class="line">console.<span class="literal">log</span>(<span class="keyword">typeof</span> f);</span><br><span class="line">console.<span class="literal">log</span>(<span class="keyword">typeof</span> <span class="keyword">g</span>);</span><br><span class="line">console.<span class="literal">log</span>(<span class="keyword">typeof</span> <span class="keyword">h</span>);</span><br></pre></td></tr></table></figure>
<p>這裏的執行結果就將會是：</p>
<figure class="highlight scala"><figcaption><span>sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">number</span><br><span class="line">string</span><br><span class="line">number</span><br><span class="line">function</span><br><span class="line"><span class="class"><span class="keyword">object</span></span><br><span class="line"></span><span class="class"><span class="keyword">object</span></span><br><span class="line"></span><span class="class"><span class="keyword">object</span></span><br><span class="line"></span>undefined</span><br></pre></td></tr></table></figure>
<h3 id="null,_undefined,_NaN">null, undefined, NaN</h3><p>在 <strong>JavaScript</strong> 中，有三個特殊的值，如標題所示。其中第一個大家可能都比較熟悉吧，<strong>C/C++</strong> 裏面也有，不過是大寫的，其本質就是一個</p>
<figure class="highlight stylus"><figcaption><span>c++</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hexcolor">#def</span>ine NULL <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>而在 <strong>JavaScript</strong> 中，這三個值所代表的意義都不同。</p>
<h4 id="null">null</h4><p><code>null</code> 是一種特殊的 <strong>object</strong>，大致的意思就是空。比如說：</p>
<figure class="highlight kotlin"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> a</span> = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<p>大家都能看懂，就不多做解釋了。但是跟 <strong>C/C++</strong> 不同的是，這個 <code>null</code> 跟 <code>0</code> 不相等。</p>
<h4 id="undefined">undefined</h4><p>這個東西的意思就是說這個變量未聲明。爲了能夠更好地區分 <code>null</code>，我們的樣例代碼如下寫：</p>
<figure class="highlight coffeescript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="reserved">var</span> a = &#123;</span><br><span class="line">    <span class="string">"foo"</span>       : <span class="literal">null</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(a[<span class="string">"foo"</span>]);</span><br><span class="line"><span class="built_in">console</span>.log(a[<span class="string">"bar"</span>]);</span><br></pre></td></tr></table></figure>
<p>上面的代碼中，我們讓 <code>a[&quot;foo&quot;]</code> 的值爲空，即 <code>null</code>。而壓根沒有聲明 <code>a[&quot;bar&quot;]</code> 這個東西，它連空都不是。輸出的結果大家都差不多應該猜到了：</p>
<figure class="highlight actionscript"><figcaption><span>sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span></span><br><span class="line"><span class="literal">undefined</span></span><br></pre></td></tr></table></figure>
<h4 id="NaN">NaN</h4><p>這是一個空的數值，是一個特殊的 <code>number</code>。它的全稱是 <code>Not a Number</code>。有點奇怪，大家可以理解爲 <strong>不是數字形態，或者數值出錯的 <code>number</code> 類型變量</strong>。</p>
<p>多在浮點型數值運算錯誤（如被0除）的情況下出現，甚至可以是用戶自己讓一個變量等於 <code>NaN</code> 以便返回一個錯誤值讓大家知道這個函數運算出錯了云云。</p>
<h3 id="小雜碎">小雜碎</h3><p>其它剩餘的語句也跟已存在的其它語言差不多，比如說 <code>break</code> 啊、<code>switch</code> 啊、<code>continue</code> 啊等等等等。</p>
<h2 id="變量類型">變量類型</h2><p>這一節主要講的是 <strong>JavaScript</strong> 對象，其它類型差不多一帶而過吧。</p>
<h3 id="基礎類型">基礎類型</h3><p><strong>Node.js</strong> 包含的基礎類型差不多有如下幾個：</p>
<ul>
<li>number</li>
<li>string</li>
<li>boolean</li>
<li>array</li>
</ul>
<p>其中前三種類型可以直接賦值，而 <code>array</code> 的賦值只是一個引用賦值而已，在新變量中改變某個值的話舊變量的值也會改變，直接可以試試下面的代碼：</p>
<figure class="highlight dns"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var foo = [ 1, 2, 3 ]<span class="comment">;</span></span><br><span class="line">var bar = foo<span class="comment">;</span></span><br><span class="line">bar[0] = 3<span class="comment">;</span></span><br><span class="line">console.log(foo)<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>它得出的結果是：</p>
<figure class="highlight json"><figcaption><span>sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span> ]</span><br></pre></td></tr></table></figure>
<p>也就是說 <code>array</code> 要是複製出一個新的數組的話，不能用直接賦值的方法，而必須“<strong><a href="#深拷貝">深拷貝</a></strong>”。</p>
<p>這裏有必要講一下 <code>array</code> 的三種創建方法。</p>
<p>第一種：</p>
<figure class="highlight javascript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">dog[<span class="number">0</span>] = <span class="string">"噓~"</span>;</span><br><span class="line">dog[<span class="number">1</span>] = <span class="string">"蛋花湯"</span>;</span><br><span class="line">dog[<span class="number">2</span>] = <span class="string">"在睡覺"</span>;</span><br></pre></td></tr></table></figure>
<p>第二種：</p>
<figure class="highlight javascript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> <span class="built_in">Array</span>( <span class="string">"噓~"</span>, <span class="string">"蛋花湯"</span>, <span class="string">"在睡覺"</span> );</span><br></pre></td></tr></table></figure>
<p>第四種：</p>
<figure class="highlight kotlin"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> dog</span> = [</span><br><span class="line">    <span class="string">"噓~"</span>,</span><br><span class="line">    <span class="string">"蛋花湯"</span>,</span><br><span class="line">    <span class="string">"在睡覺"</span></span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>我個人比較喜歡第三種寫法，比較簡潔。</p>
<h3 id="JSON對象">JSON對象</h3><p>這裏我把 <strong>JSON對象</strong> 單獨拎出來而不是把它歸類爲 <strong>JavaScript對象</strong>，如果覺得我有點誤人子弟就可以直接跳過這一節了。</p>
<p>本人對於 <strong>JSON對象</strong> 和 <strong>JavaScript</strong> 對象的區分放在 <strong>是否只用來存儲數據，而並非是一個類的實例化</strong>。其實 <strong>JSON</strong> 的本質便是 <strong>JavaScript Object Notation</strong>。</p>
<blockquote>
<p>更多有關 <strong><a href="http://zh.wikipedia.org/wiki/JSON" target="_blank" rel="external">JSON</a></strong> 的信息請自行百科。</p>
</blockquote>
<p>在 <strong>Node.js</strong> 中聲明一個 <strong>JSON對象</strong> 非常簡單：</p>
<figure class="highlight kotlin"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable"><span class="keyword">var</span> dog</span> = &#123;</span><br><span class="line">    <span class="string">"pre"</span>       : <span class="string">"噓~"</span>,</span><br><span class="line">    <span class="string">"sub"</span>       : &#123;</span><br><span class="line">        <span class="string">"name"</span>  : <span class="string">"蛋花湯"</span>,</span><br><span class="line">        <span class="string">"act"</span>   : <span class="string">"在睡覺"</span>,</span><br><span class="line">        <span class="string">"time"</span>  : <span class="number">12</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="string">"suf"</span>       : [ <span class="string">"我說了"</span>, <span class="string">"它在睡覺"</span>, <span class="string">"就是在睡覺"</span> ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>有兩種方式能得到 <strong>JSON對象</strong> 中的某個鍵名的鍵值，第一種是用點連接，第二種是用中括號：</p>
<figure class="highlight css"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">dog</span><span class="class">.pre</span>;</span><br><span class="line"><span class="tag">dog</span><span class="attr_selector">["pre"]</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>試試看</strong>：現在你自己動手試試看，用 <code>for...in</code> 的形式遍歷一遍上面的 <code>JSON對象</code>。別忘了用上 <code>typeof</code> 喵~</p>
</blockquote>
<h3 id="類（對象）的基礎">類（對象）的基礎</h3><p>嚴格意義上來講，<strong>Node.js</strong> 的類不能算是類，其實它只是一個函數的集合體，加一些成員變量。它的本質其實是一個函數。</p>
<p>不過爲了通俗地講，我們接下去以及以後都將其稱爲“類”，實例化的叫“對象”。</p>
<p>因爲類有着很多 <strong>函數</strong> 的特性，或者說它的本質就是一個 <strong>函數</strong>，所以這裏面我們可能一不留神就順帶着把函數基礎給講了。</p>
<h4 id="類的聲明和實例化">類的聲明和實例化</h4><p>聲明一個類非常簡單，大家不要笑：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>好了，我們已經寫好了一個 <code>foo</code> 類了。</p>
<blockquote>
<p>真的假的？！真的。</p>
</blockquote>
<p>不信？不信你可以接下去打一段代碼看看：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> foo();</span><br></pre></td></tr></table></figure>
<p>別看它是一個函數，如果以這樣的形式（<code>new</code>）寫出來，它就是這個類的實例化。</p>
<p>而這個所謂的 <code>foo()</code> 其實就是這個 <code>foo()</code> 類的構造函數。</p>
<h4 id="成員變量">成員變量</h4><p>成員變量有好兩種方法。</p>
<p>第一種就是在類的構造函數或者任何構造函數中使用 <code>this.&lt;變量名&gt;</code> 。你可以在任何時候聲明一個成員變量，在外部不影響使用，反正就算在還未聲明的時候使用它，也會有一個 <code>undefined</code> 來撐着。所以說這就是第一種方法：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hello = <span class="string">"world"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong>：只有在加了 <code>this</code> 的時候纔是調用類的<strong>成員變量</strong>，否則只是函數內的一個局部變量而已。要分清楚有沒有 <code>this</code> 的時候變量的作用範圍。</p>
</blockquote>
<p>第二種方法就是在構造函數或者任何成員函數外部聲明，其格式是 <code>&lt;類名&gt;.prototype.&lt;變量名&gt;</code>：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo.prototype.hello = <span class="string">"world"</span>;</span><br></pre></td></tr></table></figure>
<p>無聊上面哪種方法都是對成員變量的聲明，我們可以看看效果：</p>
<figure class="highlight coffeescript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="reserved">var</span> bar = <span class="keyword">new</span> foo();</span><br><span class="line"><span class="built_in">console</span>.log(bar.hello);</span><br></pre></td></tr></table></figure>
<p>甚至你可以這麼修改這個類：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hello = <span class="string">"world"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo.prototype.hello = <span class="string">"蛋花湯"</span>;</span><br></pre></td></tr></table></figure>
<p>然後再用上面的代碼輸出。</p>
<blockquote>
<p>想想看爲什麼輸出的還是 <code>world</code> 而不是 <code>蛋花湯</code>。</p>
</blockquote>
<h4 id="構造函數">構造函數</h4><p>我們之前說過了這個 <code>foo()</code> 實際上是一個 <strong>構造函數</strong>。那麼顯然我們可以給構造函數傳參數，所以就有了下面的代碼：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 代碼2.1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">(hello)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(hello === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.hello = <span class="string">"world"</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.hello = hello;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我們看到上面有一個奇葩的判斷 <code>if(hello === undefined)</code>，這個判斷有什麼用呢？第一種可能，就是開發者很蛋疼地特意傳進去一個 <code>undefined</code> 進去，這個時候它是 <code>undefined</code> 無可厚非。</p>
<p>還有一種情況。我們一開始就說了 <strong>JavaScript</strong> 是一門弱類型語言，其實不僅僅是弱類型，它的傳參數也非常不嚴謹。你可以多傳或者少傳（只要保證你多傳或者少傳的時候可以保證程序不出錯，或者邏輯不出錯），原則上都是可以的。多傳的參數會被自動忽略，而少傳的參數會以 <code>undefined</code> 補足。</p>
<p>看看下面的代碼就明白了：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上接代碼2.1</span></span><br><span class="line"><span class="keyword">var</span> bar1 = <span class="keyword">new</span> foo();</span><br><span class="line"><span class="keyword">var</span> bar2 = <span class="keyword">new</span> foo(<span class="string">"蛋花湯"</span>);</span><br></pre></td></tr></table></figure>
<p>請自行輸出一下兩個 <code>bar</code> 的 <code>hello</code> 變量，會發現一個是 <strong>world</strong> 一個是 <strong>蛋花湯</strong>。顯而易見，我們的第一個 <code>bar1</code> 在聲明的時候，被 <strong>Node.js</strong> 自動看成了：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bar1 = <span class="keyword">new</span> foo(<span class="literal">undefined</span>);</span><br></pre></td></tr></table></figure>
<p>所以就有了它是 <strong>world</strong> 一說。</p>
<p>還有就是在這個構造函數中，我們看到了傳進去的參數是 <code>hello</code> 而這個類中本來就有個成員變量就是 <code>this.hello</code>。不過我們之前說過了有 <code>this</code> 和沒 <code>this</code> 的時候作用域不同，那個參數只是作用於構造函數中，而加了 <code>this</code> 的那個則是成員變量。用一個 <code>this</code> 就馬上區分開來他們了，所以即使同名也沒關係。</p>
<h4 id="成員函數">成員函數</h4><h5 id="成員函數聲明">成員函數聲明</h5><p>成員函數的聲明跟成員變量的第二種聲明方法差不多，即 <code>&lt;類名&gt;.prototype.&lt;函數名&gt; = &lt;函數&gt;;</code></p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上接代碼2.1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setHello</span><span class="params">(hello)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hello = hello;</span><br><span class="line">&#125;</span><br><span class="line">foo.prototype.setHello = setHello;</span><br><span class="line"></span><br><span class="line">bar1.setHello(<span class="string">"雞蛋餅"</span>);</span><br></pre></td></tr></table></figure>
<p>上面這段代碼顯而易見，我們實現了 <code>foo</code> 類的 <code>setHello</code> 函數，能通過它修改 <code>foo.hello</code> 的值。</p>
<p>但是這麼寫是不是有點麻煩？接下去我要講一個 <strong>JavaScript</strong> 函數重要的特性了。</p>
<h4 id="★_匿名函數">★ 匿名函數</h4><p>很多時候我們的某些函數只在一個地方被引用或者調用，那麼我們爲這個函數起一個名字就太不值了，沒必要，所以我們可以臨時寫好這個函數，直接讓引用它的人引用它，調用它的人調用它。所以函數可以省略函數名，如：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span><span class="params">(hello)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hello = hello;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>至於怎麼引用或者調用呢？如果是上面的那個類需要引用的話，就是寫成這樣的：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo.prototype.setHello = <span class="function"><span class="keyword">function</span><span class="params">(hello)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hello = hello;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>這樣的寫法跟 <strong><a href="#成員函數聲明">2.3.3.1. 成員函數聲明</a></strong> 是一個效果的，而且省了很多的代碼量。而且實際上，基本上的類成員函數的聲明都是採用這種匿名函數的方式來聲明的。</p>
<p>至於說怎麼樣讓匿名函數被調用呢？這通常用於傳入一個只被某個函數調用的函數時這樣寫。</p>
<p>比如我們有一個函數的原型是：</p>
<figure class="highlight swift"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 我們將傳入a，b兩個變量，</span><br><span class="line"> * 在算出a+b的值後，交由func(num)</span><br><span class="line"> * 去進行輸出</span><br><span class="line"> */</span></span><br><span class="line">function sumab(a, b, <span class="func"><span class="keyword">func</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">c</span> = a + b;</span><br><span class="line">    <span class="func"><span class="keyword">func</span><span class="params">(a, b, <span class="built_in">c</span>)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比如我們有兩個版本的輸出函數，一個是中文輸出，一個是英文輸出，那麼如果不用匿名函數時候是這麼寫的：</p>
<figure class="highlight openscad"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">zh</span><span class="params">(a, b, sum)</span> &#123;</span></span><br><span class="line">    console.<span class="built_in">log</span><span class="params">(a + <span class="string">" + "</span> + b + <span class="string">" 的值是："</span> + sum)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">en</span><span class="params">(a, b, sum)</span> &#123;</span></span><br><span class="line">    console.<span class="built_in">log</span><span class="params">(a + <span class="string">" plus "</span> + b + <span class="string">" is "</span> + sum)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sumab<span class="params">(<span class="number">1</span>, <span class="number">2</span>, zh)</span>;</span><br><span class="line">sumab<span class="params">(<span class="number">3</span>, <span class="number">4</span>, en)</span>;</span><br></pre></td></tr></table></figure>
<p>執行一遍這段代碼，輸出的結果將會是：</p>
<figure class="highlight actionscript"><figcaption><span>sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> + <span class="number">2</span> 的值是：<span class="number">3</span></span><br><span class="line"><span class="number">3</span> plus <span class="number">4</span> <span class="keyword">is</span> <span class="number">7</span></span><br></pre></td></tr></table></figure>
<p>這樣的代碼如果採用匿名函數的形式則將會是：</p>
<figure class="highlight lisp"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sumab<span class="list">(<span class="number">1</span>, <span class="number">2</span>, function<span class="list">(<span class="keyword">a</span>, b, sum)</span> &#123;</span><br><span class="line">    console.log<span class="list">(<span class="keyword">a</span> + <span class="string">" + "</span> + b + <span class="string">" 的值是："</span> + sum)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br><span class="line">sumab<span class="list">(<span class="number">3</span>, <span class="number">4</span>, function<span class="list">(<span class="keyword">a</span>, b, sum)</span> &#123;</span><br><span class="line">    console.log<span class="list">(<span class="keyword">a</span> + <span class="string">" plus "</span> + b + <span class="string">" is "</span> + sum)</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>這種形式通常使用於回調函數。回調機制算是 <strong>Node.js</strong> 或者說 <strong>JavaScript</strong> 的精髓。在以後的篇章會做介紹。</p>
<h4 id="成員函數聲明的匿名函數聲明方式">成員函數聲明的匿名函數聲明方式</h4><p>雖然上一節講過了，不過還是再講一遍吧。</p>
<p>通常我們聲明類的成員函數時候都是用匿名函數來聲明的，因爲反正那個函數也就是這個類的一個成員函數而已，不會在其它地方被單獨引用或者調用，所以就有了下面的代碼：</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上接代碼2.1</span></span><br><span class="line">foo.prototype.setHello = <span class="function"><span class="keyword">function</span><span class="params">(hello)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.hello = hello;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>這樣我們就使得 <code>foo</code> 類有了 <code>setHello</code> 這個函數了。</p>
<h4 id="類的隨意性">類的隨意性</h4><p>這個又是我胡扯的。所謂類的隨意性即 <strong>JavaScript</strong> 中你可以在任何地方修改你的類，這跟 <strong>Ruby</strong> 有着一定的相似之處。</p>
<p>比如說 <code>string</code> ，它其實也是一個類，有着諸如 <code>length</code> 這樣的成員變量，也有 <code>indexOf</code>、<code>substr</code> 等成員函數。但是萬一我們覺得這個 <code>string</code> 有些地方不完善，想加自己的方法，那麼可以在你想要的地方給它增加一個函數，比如：</p>
<figure class="highlight javascript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.sb = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> newstr = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(i % <span class="number">2</span> === <span class="number">0</span>) newstr += <span class="string">"s"</span>;</span><br><span class="line">        <span class="keyword">else</span> newstr += <span class="string">"b"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> newstr;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>這個函數的意思就是填充一個字符串，使其變成 <code>sb</code> 的化身。</p>
<p>我們來測試一下：</p>
<figure class="highlight openscad"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var <span class="built_in">str</span> = <span class="string">"噓~蛋花湯在睡覺。"</span>;</span><br><span class="line">console.<span class="built_in">log</span><span class="params">(str.sb<span class="params">()</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>你將會得到這樣的結果：</p>
<figure class="highlight"><figcaption><span>sh</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sbsbsbsbs</span><br></pre></td></tr></table></figure>
<blockquote>
<p>你跟你的電腦說“噓~蛋花湯在睡覺。”，你的電腦會罵你四次半傻逼。（趕快砸了它）</p>
</blockquote>
<h2 id="附">附</h2><h3 id="深拷貝">深拷貝</h3><p>所謂深拷貝就是自己新建一個數組或者對象，把源數組或者對象中的基礎類型變量值一個個手動拷過去，而不是隻把源數組或者對象的引用拿過來。所以這就涉及到了一個遞歸的調用什麼的。</p>
<p>下面是我實現的一個深拷貝函數，大家可以寫一個自己的然後加入到自己的 <strong>Node.js</strong> 知識庫中。</p>
<figure class="highlight actionscript"><figcaption><span>javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cloneObject</span><span class="params">(src)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dest = &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> src) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> src === <span class="string">"object"</span>) dest[key] = cloneObject(src[key]);</span><br><span class="line">        <span class="keyword">else</span> dest[key] = src[key];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dest;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="系統默認對象參考手冊">系統默認對象參考手冊</h3><ul>
<li><strong>字符串</strong>：<a href="http://www.w3school.com.cn/js/jsref_obj_string.asp" target="_blank" rel="external">http://www.w3school.com.cn/js/jsref_obj_string.asp</a></li>
<li><strong>數字</strong>: <a href="http://www.w3school.com.cn/js/jsref_obj_number.asp" target="_blank" rel="external">http://www.w3school.com.cn/js/jsref_obj_number.asp</a></li>
<li><strong>數組</strong>: <a href="http://www.w3school.com.cn/js/jsref_obj_array.asp" target="_blank" rel="external">http://www.w3school.com.cn/js/jsref_obj_array.asp</a></li>
<li><strong>布爾</strong>: <a href="http://www.w3school.com.cn/js/jsref_obj_boolean.asp" target="_blank" rel="external">http://www.w3school.com.cn/js/jsref_obj_boolean.asp</a></li>
<li><strong>日期</strong>: <a href="http://www.w3school.com.cn/js/jsref_obj_date.asp" target="_blank" rel="external">http://www.w3school.com.cn/js/jsref_obj_date.asp</a></li>
<li><strong>數學庫</strong>：<a href="http://www.w3school.com.cn/js/jsref_obj_math.asp" target="_blank" rel="external">http://www.w3school.com.cn/js/jsref_obj_math.asp</a></li>
</ul>


			
            <section class="comment">
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/2013/08/16/node-4-base/" data-title="一起擼Node.JS（壹）——基本語法和類型" data-url="http://xcoder.in/2013/08/16/node-4-base/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"xcoder-ghost"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0]
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
</section>
        </div>
    </div>
</article>

    <footer id="footer">
    <div id="bottom-tip">
        艾克斯の編碼者 —— <small>一個偽宅级别的蒟蒻碼畜。</small>
    </div>
        <small>该博客由 <a href="https://hexo.io/" target="_blank">Hexo</a> 强力驱动，搭载 <a href="https://github.com/XadillaX/hexadillax" target="_blank">Hexadillax</a> 主题</small><br />
        <small>&copy; 2014 小鳥遊死月</small>
    </footer>
</body>
</html>
