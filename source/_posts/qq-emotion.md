title: 扒了腾讯空间的表情套图，奉献给大家
date: 2011-03-15 19:22:38
tags: [ 老博客备份归档, PHP ]
category: 老博客备份归档
---
这套图里有五套表情：

从 0~90 为 QQ 的旧版表情，从 100~204 是新版表情（这两套表情不稀奇）。300~337 是 QQ 空间签到的星星表情 I，从 500~514 是星星表情 II。最后从 1000~1005 是手机表情。

预览如下：

![Missing](https://dm.nbut.ac.cn/xcoder/archive/missing.jpg)

事情是这样的：

我觉得 QQ 空间里的这套星星表情挺不错的，就想扒下来，先观察了一下表情的地址：

> http://cnc.qzs.qq.com/qzone/em/e300.gif
>
> …
> 
> http://cnc.qzs.qq.com/qzone/em/e337.gif

很显然，这是连续的，但我想想不甘心，于是从 0 开始找，那么就是旧版表情。

好的，找到规律之后就可以开工了，开始我用渣雷批量载（999 个），发现载不下，于是就删掉了。

接下去的方案是自己写个页面（后来我发现从 1000 开始还有表情）：

```php
<?php
    for($i = 0; $i < 2000; $i++) echo "<img src="http://cnc.qzs.qq.com/qzone/em/e{$i}.gif" alt="" />\n";
?>
```

保存在我本机 Apache 根目录下的 `emo.php` 文件然后打开，悲催的一幕发生了：

![Missing](https://dm.nbut.ac.cn/xcoder/archive/missing.jpg)

如果你用我上面的方法也出现这样的情况，那么恭喜你，你也中了防盗链机制。

我就琢磨 TX 的防盗链应该是按域名来的吧，那么这就好办了：

第一步，ping：

```bash
C:\Users\死月>ping cnc.qzs.qq.com

正在 Ping cnc.qzs.tc.qq.com [221.204.218.166] 具有 32 字节的数据:
来自 221.204.218.166 的回复: 字节=32 时间=47ms TTL=54
来自 221.204.218.166 的回复: 字节=32 时间=103ms TTL=54
来自 221.204.218.166 的回复: 字节=32 时间=44ms TTL=54
来自 221.204.218.166 的回复: 字节=32 时间=39ms TTL=54

221.204.218.166 的 Ping 统计信息:
    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，
往返行程的估计时间(以毫秒为单位):
    最短 = 39ms，最长 = 103ms，平均 = 58ms
```

接下去打开 hosts 表，加上下面一句话

```hosts
127.0.0.1		cnc.qzs.qq.com
```

最后，把上面的 PHP 代码改一下：

```php
<?php
    for($i = 0; $i < 2000; $i++) echo "<img src="http://221.204.218.166/qzone/em/e{$i}.gif" alt="" />\n";
?>
```

然后打开“你的” http://cnc.qzs.qq.com/emo.php

完成！你会发现 QQ 的各表情就列在你眼前了。接下去干什么呢？

哟西，就是保存啦！我用的是 Chrome，然后右键保存网页（当然是全部网页内容啦）。好的，这下表情就被你扒到手啦！

我打个包：

> 点击下载（自然是已经找不到了）
